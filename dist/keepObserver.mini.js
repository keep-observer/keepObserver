!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){!function(t,r){e.exports=r()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/util/index.ts")}({"./node_modules/fast-safe-stringify/index.js":
/*!***************************************************!*\
        !*** ./node_modules/fast-safe-stringify/index.js ***!
        \***************************************************/
/*! no static exports found */
function(e,t){e.exports=i,i.default=i,i.stable=s,i.stableStringify=s;var r=[],n=[];function i(e,t,i){var o;for(!function e(t,i,o,s){var a;if("object"==typeof t&&null!==t){for(a=0;a<o.length;a++)if(o[a]===t){var c=Object.getOwnPropertyDescriptor(s,i);return void(void 0!==c.get?c.configurable?(Object.defineProperty(s,i,{value:"[Circular]"}),r.push([s,i,t,c])):n.push([t,i]):(s[i]="[Circular]",r.push([s,i,t])))}if(o.push(t),Array.isArray(t))for(a=0;a<t.length;a++)e(t[a],a,o,t);else{var u=Object.keys(t);for(a=0;a<u.length;a++){var l=u[a];e(t[l],l,o,t)}}o.pop()}}(e,"",[],void 0),o=0===n.length?JSON.stringify(e,t,i):JSON.stringify(e,a(t),i);0!==r.length;){var s=r.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}return o}function o(e,t){return e<t?-1:e>t?1:0}function s(e,t,i){var s,c=function e(t,i,s,a){var c;if("object"==typeof t&&null!==t){for(c=0;c<s.length;c++)if(s[c]===t){var u=Object.getOwnPropertyDescriptor(a,i);return void(void 0!==u.get?u.configurable?(Object.defineProperty(a,i,{value:"[Circular]"}),r.push([a,i,t,u])):n.push([t,i]):(a[i]="[Circular]",r.push([a,i,t])))}if("function"==typeof t.toJSON)return;if(s.push(t),Array.isArray(t))for(c=0;c<t.length;c++)e(t[c],c,s,t);else{var l={},d=Object.keys(t).sort(o);for(c=0;c<d.length;c++){var f=d[c];e(t[f],f,s,t),l[f]=t[f]}if(void 0===a)return l;r.push([a,i,t]),a[i]=l}s.pop()}}(e,"",[],void 0)||e;for(s=0===n.length?JSON.stringify(c,t,i):JSON.stringify(c,a(t),i);0!==r.length;){var u=r.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}return s}function a(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(n.length>0)for(var i=0;i<n.length;i++){var o=n[i];if(o[1]===t&&o[0]===r){r="[Circular]",n.splice(i,1);break}}return e.call(this,t,r)}}},"./node_modules/hash-string/build/hash-string.js":
/*!*******************************************************!*\
        !*** ./node_modules/hash-string/build/hash-string.js ***!
        \*******************************************************/
/*! no static exports found */
function(e,t,r){var n,i,o;i=[],void 0===(o="function"==typeof(n=function(){return function(e){"use strict";for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}})?n.apply(t,i):n)||(e.exports=o)},"./src/constants/index.ts":
/*!********************************!*\
        !*** ./src/constants/index.ts ***!
        \********************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportType=["unKownType","log","network","vue"],t.version="2.0.0-alpha.3",t.publicMiddleScopeNames=["sendMessage","error"]},"./src/util/console.ts":
/*!*****************************!*\
        !*** ./src/util/console.ts ***!
        \*****************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=window.console.log,s=window.console.warn,a=window.console.error;window.console.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.apply(window.console,e)},window.console.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.apply(window.console,e)},window.console.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.apply(window.console,e)},t.log=o,t.error=a,t.wran=s,t.devLog=function(e){void 0===e&&(e=!0);for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(e)return t.log.apply(void 0,i(["[keepObserver] log message:"],r))},t.devWarn=function(e){void 0===e&&(e=!0);for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(e)return t.wran.apply(void 0,i(["[keepObserver] wran message:"],r))},t.warnError=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.error.apply(void 0,i(["[keepObserver] find error! message:"],e))}},"./src/util/deviceID.ts":
/*!******************************!*\
        !*** ./src/util/deviceID.ts ***!
        \******************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(
/*! ./tool */
"./src/util/tool.ts")),o=function(){if(!window.localStorage)return!1;var e=i.getStorage("deviceId");return e||(e=i.getUniqueID(),i.setStorage("deviceId",e)),e};t.default=function(){return o()}},"./src/util/index.ts":
/*!***************************!*\
        !*** ./src/util/index.ts ***!
        \***************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(
/*! ./tool */
"./src/util/tool.ts"));t.Tools=o;var s=n(r(
/*! ./console */
"./src/util/console.ts"));t.consoleTools=s;var a=i(r(
/*! ./deviceID */
"./src/util/deviceID.ts"));t.getDeviceId=a.default;var c=i(r(
/*! ./share/public */
"./src/util/share/public/index.ts"));t.KeepObserverPublic=c.default;var u=i(r(
/*! ./share/middleware */
"./src/util/share/middleware/index.ts"));t.KeepObserverMiddleWare=u.default},"./src/util/share/middleware/index.ts":
/*!********************************************!*\
        !*** ./src/util/share/middleware/index.ts ***!
        \********************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(
/*! ../../../util/tool */
"./src/util/tool.ts")),a=o(r(
/*! ../../../util/console */
"./src/util/console.ts")),c=r(
/*! ../../../constants/index */
"./src/constants/index.ts"),u=function(){function e(e){var t=e.develop,r=void 0!==t&&t,n=e.runMiddleTimeOut,i=void 0===n?3e4:n;this._develop=r,this._runMiddleTimeOut=i,this._middles={},this._runMiddleBuff={}}return e.usePublishMiddles=function(e,t){return this.publicMiddles[e]?(this.publicMiddles[e].unshift(t),this.publicMiddles):(this.publicMiddles[e]=[],this.publicMiddles[e].unshift(t),this.publicMiddles)},e.prototype.use=function(e,t){return this._middles[e]?this._middles[e].unshift(t):(this._middles[e]=[],this._middles[e].unshift(t))},e.prototype.run=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this,u=this.constructor.publicMiddles;if(!o._middles[e]&&!u[e])return c.publicMiddleScopeNames.indexOf(e)>-1?new Promise(function(e){return e.apply(void 0,i(r))}):(a.warnError(e+" middles function is undefined"),Promise.reject(e+" middles function is undefined"));if(o._runMiddleBuff[e])return o._develop&&a.warnError(e+" middles is run"),Promise.reject(e+" middles is run");var l=(u[e]||[]).concat(o._middles[e]||[]),d=l.length,f=1;return o._runMiddleBuff[e]=!0,this.constructor.currentRunMiddle=e,new Promise(function(n,c){var u=setTimeout(function(){f=d,o._runMiddleBuff[e]=!1;var r=e+" middles exec is timeout "+t._runMiddleTimeOut+"ms";a.warnError(r),"error"!==e&&o.throwError(r),c(r)},t._runMiddleTimeOut),p=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return f=d,clearTimeout(u),o._runMiddleBuff[e]=!1,n.apply(void 0,i(t))};try{l.reduce(function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e(p,function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return f===d?t:(f++,e.apply(void 0,i(t)))}}(t.apply(void 0,i(r))))}})(p,p).apply(void 0,i(r))}catch(t){o._runMiddleBuff[e]=!1,clearTimeout(u);var h=e+" middles exec is error:"+s.toString(t);a.warnError(h),"error"!==e&&o.throwError(h),c(h)}}).finally(function(){t.constructor.currentRunMiddle=!1})},e.prototype.throwError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.run.apply(this,i(["error"],e)).catch(function(e){})},e.publicMiddles={},e.currentRunMiddle=!1,e}();t.default=u},"./src/util/share/public/index.ts":
/*!****************************************!*\
        !*** ./src/util/share/public/index.ts ***!
        \****************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var c=r(
/*! ../../../constants/index */
"./src/constants/index.ts"),u=s(r(
/*! ../middleware/index */
"./src/util/share/middleware/index.ts")),l=a(r(
/*! ../../tool */
"./src/util/tool.ts")),d=function(){function e(e){void 0===e&&(e={});var t=e,r=t.develop,n=void 0!==r&&r,i=t.runMiddleTimeOut,o=void 0===i?3e4:i;this._develop=n,this.middleScopeNames=[],this._publicMiddleScopeNames=c.publicMiddleScopeNames,this._middleWareInstance=new u.default(l.extend({develop:n,runMiddleTimeOut:o},e))}return e.extendReport=function(e){var t=n({},this.extendReportParams,e);return this.extendReportParams=t,t},e.prototype.useMiddle=function(e,t){return this._middleWareInstance.use(e,t),this},e.prototype.runMiddle=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this._middleWareInstance).run.apply(t,o([e],r)).catch(function(e){})},e.prototype.handleReportData=function(e){var t={data:void 0,type:"undefined",typeName:"undefined"},r=this.constructor.extendReportParams;return n({},t,{location:window.location.href,environment:window.navigator.userAgent,reportTime:(new Date).getTime()},e,r)},e.extendReportParams={},e}();t.default=d},"./src/util/tool.ts":
/*!**************************!*\
        !*** ./src/util/tool.ts ***!
        \**************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(
/*! ./console */
"./src/util/console.ts"),o=n(r(
/*! hash-string */
"./node_modules/hash-string/build/hash-string.js")),s=n(r(
/*! fast-safe-stringify */
"./node_modules/fast-safe-stringify/index.js"));function a(e){return"[object Number]"==Object.prototype.toString.call(e)}function c(e){return"[object String]"==Object.prototype.toString.call(e)}function u(e){return"[object Array]"==Object.prototype.toString.call(e)}function l(e){return"[object Boolean]"==Object.prototype.toString.call(e)}function d(e){return"[object RegExp]"==Object.prototype.toString.call(e)}function f(e){return"[object Date]"==Object.prototype.toString.call(e)}function p(e){return void 0===e}function h(e){return null===e}function v(e){return"[object Symbol]"==Object.prototype.toString.call(e)}function m(e){return!("[object Object]"!=Object.prototype.toString.call(e)&&(a(e)||c(e)||l(e)||f(e)||d(e)||u(e)||h(e)||_(e)||p(e)||v(e)))}function g(e){if(!m(e))return!0;for(var t in e)return!1;return!0}function y(e){return!u(e)||!(e.length>0)}function _(e){return"[object Function]"==Object.prototype.toString.call(e)}function b(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function w(e){var t=Object.prototype.toString.call(e);return"[object global]"==t||"[object Window]"==t||"[object DOMWindow]"==t}function S(e){var t,r=Object.prototype.hasOwnProperty;if(!e||"object"!=typeof e||e.nodeType||w(e))return!1;try{if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||r.call(e,t)}function T(e){return Array.from?Array.from(e):Array.prototype.slice.call(e)}function k(e){return"string"==typeof e?e:e.toString()}function j(e){return s.default(e,function(e,t){return w(t)?"[Window]":b(t)?"[DomElement]":t})}t.dateFormat=function(e,t){if(!t||"string"!=typeof t)return console.error("format is undefiend or type is Error"),"";var r={"y+":(e=e instanceof Date?e:"number"==typeof e||"string"==typeof e?new Date(e):new Date).getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in r)if(new RegExp(n).test(t)){var i=RegExp.lastMatch;t=t.replace(i,r[n]<10?"0"+r[n]:r[n].toString())}return t},t.isNumber=a,t.isString=c,t.isArray=u,t.isBoolean=l,t.isRegExp=d,t.isDateObject=f,t.isUndefined=p,t.isNull=h,t.isExist=function(e){return!p(e)&&!h(e)},t.isSymbol=v,t.isSVGElement=function(e){return b(e)&&(e instanceof SVGElement||e.ownerSVGElement)},t.isObject=m,t.isEmptyObject=g,t.isEmptyArray=y,t.isFunction=_,t.isElement=b,t.isWindow=w,t.isPlainObject=S,t.isClassObject=function(e){return!(!m(e)||S(e))},t.toArray=T,t.toString=k,t.setSessionStorage=function(e,t){window.sessionStorage&&(e="keepObserverData_"+e,t=JSON.stringify(t),sessionStorage.setItem(e,t))},t.getSessionStorage=function(e){if(window.sessionStorage){e="keepObserverData_"+e;var t=sessionStorage.getItem(e);return t?JSON.parse(t):""}},t.removeSessionStorage=function(e){window.sessionStorage&&(e="keepObserverData_"+e,sessionStorage.removeItem(e))},t.setStorage=function(e,t){window.localStorage&&(e="keepObserverData_"+e,t=JSON.stringify(t),localStorage.setItem(e,t))},t.getStorage=function(e){if(window.localStorage){e="keepObserverData_"+e;var t=localStorage.getItem(e);return t?JSON.parse(t):""}},t.removeStorage=function(e){window.localStorage&&(e="keepObserverData_"+e,localStorage.removeItem(e))},t.getUniqueID=function(){return"xxxxxxxx-xxx-t-xxx--xxxxxxxx".replace(/[xyt]/g,function(e){var t=16*Math.random()|0,r=(new Date).getTime();return("x"==e?t:"t"==e?r:3&t|8).toString(16)})},t.extend=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=T(arguments);if(0===n.length)return console.error("extends params is undefined"),{};if(1===n.length)return n[0];var i=n[0],o=n.slice(1,n.length);return m(i)||u(i)||(i={}),o.map(function(t){if(i===t)return!1;if(m(t))for(var r in t)m(t[r])&&!g(t[r])?(i[r]=i[r]&&m(i[r])?i[r]:{},i[r]=e(i[r],t[r])):u(t[r])&&!y(t[r])?(i[r]=i[r]&&u(i[r])?i[r]:[],i[r]=e(i[r],t[r])):m(t[r])&&g(t[r])?i[r]={}:u(t[r])&&y(t[r])?i[r]=[]:i[r]=t[r];else if(u(t))for(var n=0;n<t.length;n++)m(t[n])&&!g(t[n])?(i[n]=i[n]&&m(i[n])?i[n]:{},i[n]=e(i[n],t[n])):u(t[n])&&!y(t[n])?(i[n]=i[n]&&u(i[n])?i[n]:[],i[n]=e(i[n],t[n])):m(t[n])&&g(t[n])?i[n]={}:u(t[n])&&y(t[n])?i[n]=[]:i[n]=t[n]}),i},t.mixin=function(e,t){for(var r in t&&m(t)&&!g(t)||i.warnError("keepObserver $mixin receive params not right"),t)e[r]?i.warnError("keepObserver $mixin method key: "+r+" is exist"):Object.defineProperty(e,r,{configurable:!1,enumerable:!0,value:t[r]})},t.filter=function(e,t){if(!u(e)&&!m(e)||!_(t))return e;if(u(e))return e.filter(t);var r={};for(var n in e){var i=e[n];t(i,n)&&(r[n]=i)}return r},t.map=function(e,t){if(!u(e)&&!m(e)||!_(t))return e;if(u(e))return e.map(t);var r={};for(var n in e){var i=e[n];r[n]=t(i,n)}return r},t.mapToArray=function(e,t){if(!u(e)&&!m(e)||!_(t))return e;if(u(e))return e.map(t);var r=[];for(var n in e){var i=e[n];r.push(t(i,n))}return r},t.throttleWrap=function(e){return function(t){var r=null;return function(){var n=arguments;r&&clearTimeout(r),r=setTimeout(function(){t(n)},e)}}},t.debounceWrap=function(e){return function(t){var r=null;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=arguments;if(null!==r)return!1;r=setTimeout(function(){t(o),clearTimeout(r),r=null},e)}}},t.objectStringify=j,t.getHashCode=function(e){try{return k(o.default(j(e)))}catch(e){return k(o.default(k(e)))}},t.substringLimt=function(e,t,r){return void 0===t&&(t=200),void 0===r&&(r=!0),(e=c(e)?e:k(e)).substring(0,e.length>t?t:e.length)+(e.length>t&&r?"...":"")}}})})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(e){var n,i,o;function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(s,a){"object"===p(t)&&"object"===p(e)?e.exports=a(r(0)):(i=[r(0)],void 0===(o="function"==typeof(n=a)?n.apply(t,i):n)||(e.exports=o))}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/services/report/kibanaApm/index.ts")}({"./node_modules/elastic-apm-js-core/node_modules/error-stack-parser/error-stack-parser.js":
/*!************************************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/node_modules/error-stack-parser/error-stack-parser.js ***!
        \************************************************************************************************/
/*! no static exports found */
function(e,t,r){var n,i,o;!function(s,a){"use strict";i=[r(
/*! stackframe */
"./node_modules/elastic-apm-js-core/node_modules/stackframe/stackframe.js")],void 0===(o="function"==typeof(n=function(e){var t=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;function i(e,t,r){if("function"==typeof Array.prototype.map)return e.map(t,r);for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=t.call(r,e[i]);return n}function o(e,t,r){if("function"==typeof Array.prototype.filter)return e.filter(t,r);for(var n=[],i=0;i<e.length;i++)t.call(r,e[i])&&n.push(e[i]);return n}return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){var n=o(t.stack.split("\n"),function(e){return!!e.match(r)},this);return i(n,function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),i=r.join(" ")||void 0,o=function(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}(["eval","<anonymous>"],n[0])>-1?void 0:n[0];return new e(i,void 0,o,n[1],n[2],t)},this)},parseFFOrSafari:function(t){var r=o(t.stack.split("\n"),function(e){return!e.match(n)},this);return i(r,function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var r=t.split("@"),n=this.extractLocation(r.pop()),i=r.join("@")||void 0;return new e(i,void 0,n[0],n[1],n[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),i=[],o=2,s=n.length;o<s;o+=2){var a=r.exec(n[o]);a&&i.push(new e(void 0,void 0,a[2],a[1],void 0,n[o]))}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),i=[],o=0,s=n.length;o<s;o+=2){var a=r.exec(n[o]);a&&i.push(new e(a[3]||void 0,void 0,a[2],a[1],void 0,n[o]))}return i},parseOpera11:function(r){var n=o(r.stack.split("\n"),function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return i(n,function(t){var r,n=t.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(r=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e(s,a,i[0],i[1],i[2],t)},this)}}})?n.apply(t,i):n)||(e.exports=o)}()},"./node_modules/elastic-apm-js-core/node_modules/stackframe/stackframe.js":
/*!********************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/node_modules/stackframe/stackframe.js ***!
        \********************************************************************************/
/*! no static exports found */
function(e,t,r){var n,i,o;!function(r,s){"use strict";i=[],void 0===(o="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,r,n,i,o){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==i&&this.setColumnNumber(i),void 0!==o&&this.setSource(o)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})?n.apply(t,i):n)||(e.exports=o)}()},"./node_modules/elastic-apm-js-core/src/common/apm-server.js":
/*!*******************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/apm-server.js ***!
        \*******************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./queue */
"./node_modules/elastic-apm-js-core/src/common/queue.js"),i=r(
/*! ./throttle */
"./node_modules/elastic-apm-js-core/src/common/throttle.js"),o=r(
/*! ./utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),s=r(
/*! ./ndjson */
"./node_modules/elastic-apm-js-core/src/common/ndjson.js"),a=r(
/*! ./patching/patch-utils */
"./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js").XHR_IGNORE,c=function(){function e(t,r){l(this,e),this._configService=t,this._loggingService=r,this.logMessages={invalidConfig:{message:"Configuration is invalid!",level:"warn"}},this.errorQueue=void 0,this.transactionQueue=void 0,this.throttleAddError=void 0,this.throttleAddTransaction=void 0,this.initialized=!1,this.ndjsonSpan={}}return f(e,[{key:"init",value:function(){this.initialized||(this.initialized=!0,this.initErrorQueue(),this.initTransactionQueue())}},{key:"createServiceObject",value:function(){var e=this._configService,t=e.get("serverStringLimit");return{name:o.sanitizeString(e.get("serviceName"),t,!0),version:o.sanitizeString(e.get("serviceVersion"),t,!1),agent:{name:e.get("agentName"),version:e.get("agentVersion")},language:{name:"javascript"}}}},{key:"_postJson",value:function(e,t){return this._makeHttpRequest("POST",e,t,{"Content-Type":"application/x-ndjson"})}},{key:"_makeHttpRequest",value:function(e,t,r,n){return new Promise(function(i,o){var s=new window.XMLHttpRequest;if(s[a]=!0,s.open(e,t,!0),s.timeout=1e4,n)for(var c in n)n.hasOwnProperty(c)&&s.setRequestHeader(c,n[c]);s.onreadystatechange=function(){if(4===s.readyState){var e=s.status;if(0===e||e>399&&e<600){var r=new Error(t+" HTTP status: "+e);r.xhr=s,o(r)}else i(s.responseText)}},s.onerror=function(e){o(e)},s.send(r)})}},{key:"_createQueue",value:function(e){var t=this._configService.get("queueLimit"),r=this._configService.get("flushInterval");return new n(e,{queueLimit:t,flushInterval:r})}},{key:"initErrorQueue",value:function(){var e=this;this.errorQueue&&this.errorQueue.flush(),this.errorQueue=this._createQueue(function(t){var r=e.sendErrors(t);r&&r.then(void 0,function(t){e._loggingService.warn("Failed sending errors!",t)})});var t=e._configService.get("errorThrottleLimit"),r=e._configService.get("errorThrottleInterval");this.throttleAddError=i(this.errorQueue.add.bind(this.errorQueue),function(){e._loggingService.warn("Dropped error due to throttling!")},{limit:t,interval:r})}},{key:"initTransactionQueue",value:function(){var e=this;this.transactionQueue&&this.transactionQueue.flush(),this.transactionQueue=this._createQueue(function(t){var r=e.sendTransactions(t);r&&r.then(void 0,function(t){e._loggingService.warn("Failed sending transactions!",t)})});var t=e._configService.get("transactionThrottleLimit"),r=e._configService.get("transactionThrottleInterval");this.throttleAddTransaction=i(this.transactionQueue.add.bind(this.transactionQueue),function(){e._loggingService.warn("Dropped transaction due to throttling!")},{limit:t,interval:r})}},{key:"addError",value:function(e){this._configService.isActive()&&(this.errorQueue||this.initErrorQueue(),this.throttleAddError(e))}},{key:"addTransaction",value:function(e){this._configService.isActive()&&(this.transactionQueue||this.initTransactionQueue(),this.throttleAddTransaction(e))}},{key:"warnOnce",value:function(e){"warn"===e.level?(e.level="debug",this._loggingService.warn(e.message)):this._loggingService.debug(e.message)}},{key:"ndjsonErrors",value:function(e){return e.map(function(e){return s.stringify({error:e})})}},{key:"sendErrors",value:function(e){if(this._configService.isValid()&&this._configService.isActive()){if(e&&e.length>0){var t={service:this.createServiceObject(),errors:e};if(t=this._configService.applyFilters(t)){var r=this._configService.getEndpointUrl("errors"),n=this.ndjsonErrors(t.errors);n.unshift(s.stringify({metadata:{service:t.service}}));var i=n.join("");return this._postJson(r,i)}this._loggingService.warn("Dropped payload due to filtering!")}}else this.warnOnce(this.logMessages.invalidConfig)}},{key:"ndjsonTransactions",value:function(e){var t=this.ndjsonSpan;return e.map(function(e){var r="";return e.spans&&(r=e.spans.map(function(e){return t.span=e,s.stringify(t)}).join(""),delete e.spans),s.stringify({transaction:e})+r})}},{key:"sendTransactions",value:function(e){if(this._configService.isValid()&&this._configService.isActive()){if(e&&e.length>0){var t={service:this.createServiceObject(),transactions:e};if(t=this._configService.applyFilters(t)){var r=this._configService.getEndpointUrl("transactions"),n=this.ndjsonTransactions(t.transactions);n.unshift(s.stringify({metadata:{service:t.service}}));var i=n.join("");return this._postJson(r,i)}this._loggingService.warn("Dropped payload due to filtering!")}}else this.warnOnce(this.logMessages.invalidConfig)}}]),e}();e.exports=c},"./node_modules/elastic-apm-js-core/src/common/config-service.js":
/*!***********************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/config-service.js ***!
        \***********************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),i=n.getCurrentScript,o=n.sanitizeString,s=n.setTag,a=n.merge,c=r(
/*! ../common/subscription */
"./node_modules/elastic-apm-js-core/src/common/subscription.js"),u=r(
/*! ./constants */
"./node_modules/elastic-apm-js-core/src/common/constants.js");var d=function(){function e(){l(this,e),this.config={},this.defaults={serviceName:"",serviceVersion:"",agentName:"js-base",agentVersion:"%%agent-version%%",serverUrl:"http://localhost:8200",serverUrlPrefix:"/intake/v2/rum/events",active:!0,debug:!1,logLevel:"warn",browserResponsivenessInterval:500,browserResponsivenessBuffer:3,checkBrowserResponsiveness:!0,groupSimilarSpans:!0,similarSpanThreshold:.05,capturePageLoad:!0,ignoreTransactions:[],errorThrottleLimit:20,errorThrottleInterval:3e4,transactionThrottleLimit:20,transactionThrottleInterval:3e4,transactionDurationThreshold:6e4,queueLimit:-1,flushInterval:500,sendPageLoadTransaction:!0,serverStringLimit:u.serverStringLimit,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderValueCallback:void 0,distributedTracingHeaderName:"elastic-apm-traceparent",pageLoadTraceId:void 0,pageLoadSpanId:void 0,pageLoadSampled:void 0,pageLoadTransactionName:void 0,transactionSampleRate:1,context:{},platform:{}},this._changeSubscription=new c,this.filters=[]}return f(e,[{key:"init",value:function(){var e=function(e){if(!e)return{};for(var t={},r=/^data-([\w-]+)$/,n=e.attributes,i=0;i<n.length;i++){var o=n[i];if(r.test(o.nodeName)){var s=o.nodeName.match(r)[1],a=s.split("-").map(function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e}).join("");t[a]=o.value||o.nodeValue}}return t}(i());this.setConfig(e)}},{key:"isActive",value:function(){return this.get("active")}},{key:"addFilter",value:function(e){if("function"!=typeof e)throw new Error("Argument to must be function");this.filters.push(e)}},{key:"applyFilters",value:function(e){for(var t=0;t<this.filters.length;t++)if(!(e=this.filters[t](e)))return;return e}},{key:"get",value:function(e){return e.split(".").reduce(function(e,t){return e&&e[t]},this.config)}},{key:"getEndpointUrl",value:function(){return this.get("serverUrl")+this.get("serverUrlPrefix")}},{key:"set",value:function(e,t){for(var r=e.split("."),n=r.length-1,i=this.config,o=0;o<n+1;o++){var s=r[o];if(s)if(o===n)i[s]=t;else{var a=i[s]||{};i[s]=a,i=a}}}},{key:"setUserContext",value:function(e){var t={};"number"==typeof e.id&&(t.id=e.id),"string"==typeof e.id&&(t.id=o(e.id,this.get("serverStringLimit"))),"string"==typeof e.username&&(t.username=o(e.username,this.get("serverStringLimit"))),"string"==typeof e.email&&(t.email=o(e.email,this.get("serverStringLimit"))),this.set("context.user",t)}},{key:"setCustomContext",value:function(e){e&&"object"===p(e)&&this.set("context.custom",e)}},{key:"setTag",value:function(e,t){e&&(this.config.context.tags||(this.config.context.tags={}),s(e,t,this.config.context.tags))}},{key:"addTags",value:function(e){var t=this;Object.keys(e).forEach(function(r){t.setTag(r,e[r])})}},{key:"setConfig",value:function(e){e=e||{},this.config=a({},this.defaults,this.config,e),this._changeSubscription.applyAll(this,[this.config])}},{key:"subscribeToChange",value:function(e){return this._changeSubscription.subscribe(e)}},{key:"isValid",value:function(){for(var e=["serviceName","serverUrl"],t=0;t<e.length;t++){var r=e[t];if(null==this.config[r]||""===this.config[r])return!1}return!0}}]),e}();e.exports=d},"./node_modules/elastic-apm-js-core/src/common/constants.js":
/*!******************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/constants.js ***!
        \******************************************************************/
/*! no static exports found */
function(e,t){e.exports={SCHEDULE:"schedule",INVOKE:"invoke",CLEAR:"clear",FETCH_SOURCE:"fetch",XMLHTTPREQUEST_SOURCE:"XMLHttpRequest.send",ADD_EVENT_LISTENER_STR:"addEventListener",REMOVE_EVENT_LISTENER_STR:"removeEventListener",serverStringLimit:1024}},"./node_modules/elastic-apm-js-core/src/common/logging-service.js":
/*!************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/logging-service.js ***!
        \************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js").noop,i=function(){function e(t){l(this,e),t||(t={}),this.levels=["trace","debug","info","warn","error"],this.level=t.level||"info",this.prefix=t.prefix||"",this.resetLogMethods()}return f(e,[{key:"shouldLog",value:function(e){return this.levels.indexOf(e)>=this.levels.indexOf(this.level)}},{key:"setLevel",value:function(e){this.level=e,this.resetLogMethods()}},{key:"resetLogMethods",value:function(){var e=this;this.levels.forEach(function(t){e[t]=e.shouldLog(t)?function(){var r,n=e.prefix;switch(t){case"trace":case"debug":r="info";break;default:r=t}var i=arguments;n&&("function"==typeof n&&(n=n(t)),i[0]=n+i[0]);if(console){var o=console[r]?console[r]:console.log;"function"==typeof o&&o.apply(console,i)}}:n})}}]),e}();e.exports=i},"./node_modules/elastic-apm-js-core/src/common/ndjson.js":
/*!***************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/ndjson.js ***!
        \***************************************************************/
/*! no static exports found */
function(e,t){var r=function(){function e(){l(this,e)}return f(e,null,[{key:"stringify",value:function(e){return JSON.stringify(e)+"\n"}}]),e}();e.exports=r},"./node_modules/elastic-apm-js-core/src/common/patching/fetch-patch.js":
/*!*****************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/patching/fetch-patch.js ***!
        \*****************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./patch-utils */
"./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js").globalState,i=r(
/*! ../constants */
"./node_modules/elastic-apm-js-core/src/common/constants.js"),o=i.SCHEDULE,s=i.INVOKE,a=i.FETCH_SOURCE,c=!1;e.exports={patchFetch:function(e){if(!c&&(c=!0,window.fetch&&window.Request)){var t=window.fetch;window.fetch=function(i,s){var c,u,l=this,d=arguments;if("string"==typeof i)c=new Request(i,s),u=i;else{if(!i)return t.apply(l,d);u=(c=i).url}var f={source:a,state:"",type:"macroTask",data:{target:c,method:c.method,sync:!1,url:u,args:arguments,aborted:!1}};return new Promise(function(i,s){var a;n.fetchInProgress=!0,function(t){t.state=o,e(o,t)}(f);try{a=t.apply(l,[c])}catch(e){return s(e),f.data.error=e,r(f),void(n.fetchInProgress=!1)}a.then(function(e){i(e),f.data.response=e,r(f)},function(e){s(e),f.data.error=e,r(f)}),n.fetchInProgress=!1})}}function r(t){t.state=s,e(s,t)}}}},"./node_modules/elastic-apm-js-core/src/common/patching/index.js":
/*!***********************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/patching/index.js ***!
        \***********************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./xhr-patch */
"./node_modules/elastic-apm-js-core/src/common/patching/xhr-patch.js").patchXMLHttpRequest,i=r(
/*! ./fetch-patch */
"./node_modules/elastic-apm-js-core/src/common/patching/fetch-patch.js").patchFetch,o=new(r(
/*! ../subscription */
"./node_modules/elastic-apm-js-core/src/common/subscription.js")),s=!1;e.exports={patchAll:function(){return s||(s=!0,n(function(e,t){o.applyAll(this,[e,t])}),i(function(e,t){o.applyAll(this,[e,t])})),o},subscription:o}},"./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js":
/*!*****************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js ***!
        \*****************************************************************************/
/*! no static exports found */
function(e,t){function r(e){return"__apm_symbol__"+e}e.exports={apmSymbol:r,patchMethod:function(e,t,n){for(var i=e;i&&!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);!i&&e[t]&&(i=e);var o,s=r(t);if(i&&!(o=i[s])&&(o=i[s]=i[t],function(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}(i&&Object.getOwnPropertyDescriptor(i,t)))){var a=n(o,s,t);i[t]=function(){return a(this,arguments)},function(e,t){e[r("OriginalDelegate")]=t}(i[t],o)}return o},globalState:{fetchInProgress:!1},XHR_IGNORE:r("xhrIgnore"),XHR_SYNC:r("xhrSync"),XHR_URL:r("xhrURL"),XHR_METHOD:r("xhrMethod")}},"./node_modules/elastic-apm-js-core/src/common/patching/xhr-patch.js":
/*!***************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/patching/xhr-patch.js ***!
        \***************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./patch-utils */
"./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js"),i=n.apmSymbol,o=n.patchMethod,s=n.XHR_SYNC,a=n.XHR_URL,c=n.XHR_METHOD,u=n.XHR_IGNORE,l=r(
/*! ../constants */
"./node_modules/elastic-apm-js-core/src/common/constants.js"),d=l.SCHEDULE,f=l.INVOKE,p=l.CLEAR,h=l.XMLHTTPREQUEST_SOURCE,v=l.ADD_EVENT_LISTENER_STR,m=l.REMOVE_EVENT_LISTENER_STR,g=i("xhrTask"),y=i("xhrListener"),_=i("xhrScheduled"),b=!1;e.exports={patchXMLHttpRequest:function(e){if(!b){b=!0;var t=XMLHttpRequest.prototype,r=t[v],n=t[m];if(!r){var i=window.XMLHttpRequestEventTarget;if(i){var l=i.prototype;r=l[v],n=l[m]}}var w="readystatechange",S=o(t,"open",function(){return function(e,t){return e[c]=t[0],e[a]=t[1],e[s]=!1===t[2],S.apply(e,t)}}),T=o(t,"send",function(){return function(t,i){var o={source:h,state:"",type:"macroTask",ignore:t[u],data:{target:t,method:t[c],sync:t[s],url:t[a],args:i,aborted:!1}},l=function(t){XMLHttpRequest[_]=!1,t.state=d,t.ignore||e(d,t);var i=t.data,o=i.target,s=o[y];r||(r=o[v],n=o[m]),s&&n.call(o,w,s);var a=o[y]=function(){o.readyState===o.DONE&&!i.aborted&&XMLHttpRequest[_]&&t.state===d&&j(t)};r.call(o,w,a),o[g]||(o[g]=t);var c=T.apply(o,i.args);return XMLHttpRequest[_]=!0,c}(o);return t[s]&&j(o),l}}),k=o(t,"abort",function(){return function(t,r){var n=t[g];if(n&&"string"==typeof n.type){if(n.data&&n.data.aborted)return;!function(t){t.state=p,e(p,t),t.data.aborted=!0}(n)}return k.apply(t,r)}})}function j(t){t.state=f,t.ignore||e(f,t)}}}},"./node_modules/elastic-apm-js-core/src/common/queue.js":
/*!**************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/queue.js ***!
        \**************************************************************/
/*! no static exports found */
function(e,t){var r=function(){function e(t,r){l(this,e),r||(r={}),this.onFlush=t,this.items=[],this.queueLimit=r.queueLimit||-1,this.flushInterval=r.flushInterval||0,this.timeoutId=void 0}return f(e,[{key:"_setTimer",value:function(){var e=this;this.timeoutId=setTimeout(function(){e.flush()},this.flushInterval)}},{key:"flush",value:function(){this.onFlush(this.items),this._clear()}},{key:"_clear",value:function(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]}},{key:"add",value:function(e){this.items.push(e),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():void 0===this.timeoutId&&this._setTimer()}}]),e}();e.exports=r},"./node_modules/elastic-apm-js-core/src/common/service-factory.js":
/*!************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/service-factory.js ***!
        \************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./apm-server */
"./node_modules/elastic-apm-js-core/src/common/apm-server.js"),i=r(
/*! ./config-service */
"./node_modules/elastic-apm-js-core/src/common/config-service.js"),o=r(
/*! ./logging-service */
"./node_modules/elastic-apm-js-core/src/common/logging-service.js"),s=r(
/*! ./patching/patch-utils */
"./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js"),a=r(
/*! ./utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),c=function(){function e(){l(this,e),this._serviceCreators={},this._serviceInstances={},this.initialized=!1}return f(e,[{key:"registerCoreServices",value:function(){var e=this;this.registerServiceCreator("ConfigService",function(){return new i}),this.registerServiceCreator("LoggingService",function(){return new o}),this.registerServiceCreator("ApmServer",function(){return new n(e.getService("ConfigService"),e.getService("LoggingService"))}),this.registerServiceInstance("PatchUtils",s),this.registerServiceInstance("Utils",a)}},{key:"init",value:function(){if(!this.initialized){this.initialized=!0;var e=this.getService("ConfigService");e.init();var t=this.getService("LoggingService");r(t,e),e.subscribeToChange(function(){r(t,e)}),this.getService("ApmServer").init()}function r(e,t){!0===t.get("debug")&&"trace"!==t.config.logLevel?e.setLevel("debug",!1):e.setLevel(t.get("logLevel"),!1)}}},{key:"registerServiceCreator",value:function(e,t){this._serviceCreators[e]=t}},{key:"registerServiceInstance",value:function(e,t){this._serviceInstances[e]=t}},{key:"getService",value:function(e){if(!this._serviceInstances[e]){if("function"!=typeof this._serviceCreators[e])throw new Error("Can not get service, No creator for: "+e);this._serviceInstances[e]=this._serviceCreators[e](this)}return this._serviceInstances[e]}}]),e}();e.exports=c},"./node_modules/elastic-apm-js-core/src/common/subscription.js":
/*!*********************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/subscription.js ***!
        \*********************************************************************/
/*! no static exports found */
function(e,t){var r=function(){function e(){l(this,e),this.subscriptions=[]}return f(e,[{key:"subscribe",value:function(e){var t=this;return this.subscriptions.push(e),function(){var r=t.subscriptions.indexOf(e);r>-1&&t.subscriptions.splice(r,1)}}},{key:"applyAll",value:function(e,t){this.subscriptions.forEach(function(r){try{r.apply(e,t)}catch(e){console.log(e,e.stack)}},this)}}]),e}();e.exports=r},"./node_modules/elastic-apm-js-core/src/common/throttle.js":
/*!*****************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/throttle.js ***!
        \*****************************************************************/
/*! no static exports found */
function(e,t){e.exports=function(e,t,r){var n,i=r.context||this,o=r.limit,s=r.interval,a=r.countFn||function(){},c=0;return function(){var r="function"==typeof a&&a.apply(i,arguments);return"number"!=typeof r&&(r=1),c+=r,void 0===n&&(n=setTimeout(function(){c=0,n=void 0},s)),c>o?"function"==typeof t?t.apply(i,arguments):void 0:e.apply(i,arguments)}}},"./node_modules/elastic-apm-js-core/src/common/url.js":
/*!************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/url.js ***!
        \************************************************************/
/*! no static exports found */
function(e,t){var r=[["#","hash"],["?","query"],["/","path"],[NaN,"host",1]],n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=function(){function e(t){l(this,e);var n,i=this.extractProtocol(t||""),o=i.protocol,s=i.address,a=i.slashes,c=!o&&!a,u=this.getLocation(),d=r.slice();s=s.replace("\\","/");for(var f=0;f<d.length;f++){var p=d[f],h=p[0],v=p[1];"string"==typeof h?~(n=s.indexOf(h))&&(this[v]=s.slice(n),s=s.slice(0,n)):this[v]=s,this[v]=this[v]||c&&p[2]&&u[v]||"",p[2]&&(this[v]=this[v].toLowerCase())}this.protocol=o||u.protocol||"",this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null"}return f(e,[{key:"getLocation",value:function(){var e={};return"undefined"!=typeof window&&(e=window),e.location}},{key:"extractProtocol",value:function(e){var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],address:t[3]}}}]),e}();e.exports=i},"./node_modules/elastic-apm-js-core/src/common/utils.js":
/*!**************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/common/utils.js ***!
        \**************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./constants */
"./node_modules/elastic-apm-js-core/src/common/constants.js"),i=[].slice,o=r(
/*! ../common/url */
"./node_modules/elastic-apm-js-core/src/common/url.js"),s=r(
/*! uuid/lib/rng-browser */
"./node_modules/uuid/lib/rng-browser.js");function a(){return"withCredentials"in new window.XMLHttpRequest}for(var c=[],u=0;u<256;++u)c[u]=(u+256).toString(16).substr(1);function l(e,t){var r=t||0,n=c;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}function d(e,t,r,n){return"number"==typeof e&&(e=String(e)),r&&!e&&(e=n||"NA"),e?String(e).substr(0,t):e}var f=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];function h(e){return null!==e&&"object"===p(e)}function v(e){return"function"==typeof e}function m(e,t,r){for(var n=0,i=t.length;n<i;++n){var o=t[n];if(h(o)||v(o))for(var s=Object.keys(o),a=0,c=s.length;a<c;a++){var u=s[a],l=o[u];r&&h(l)?(h(e[u])||(e[u]=Array.isArray(l)?[]:{}),m(e[u],[l],!1)):e[u]=l}}return e}function g(){if("undefined"!=typeof document)for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;t++){var n=e[t];if(n.src.indexOf("elastic")>0)return n}}function y(e){return e.replace(/[.*"]/g,"_")}e.exports={extend:function(e){return m(e,i.call(arguments,1),!1)},merge:function(e){return m(e,i.call(arguments,1),!0)},isUndefined:function(e){return void 0===e},noop:function(){},baseExtend:m,bytesToHex:l,isCORSSupported:a,isObject:h,isFunction:v,isPlatformSupported:function(){return"undefined"!=typeof window&&"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&a()},isDtHeaderValid:function(e){return/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(e)&&"00000000000000000000000000000000"!==e.slice(3,35)&&"0000000000000000"!==e.slice(36,52)},parseDtHeaderValue:function(e){var t=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(e);if(t){var r="00"!==t[4];return{traceId:t[2],id:t[3],sampled:r}}},getNavigationTimingMarks:function(){var e=window.performance.timing,t=e.fetchStart,r={};return f.forEach(function(n){var i=e[n];i&&i>=t&&(r[n]=i-t)}),r},getPaintTimingMarks:function(){var e={},t=window.performance;if(t.getEntriesByType){var r=t.getEntriesByType("paint");if(r.length>0)for(var n=t.timing,i=n.fetchStart-n.navigationStart,o=0;o<r.length;o++){var s=r[o],a=i>=0?s.startTime-i:s.startTime;e[s.name]=a}}return e},getDtHeaderValue:function(e){if(e&&e.traceId&&e.id&&e.parentId){var t=e.sampled?"01":"00",r=e.sampled?e.id:e.parentId;return"00-"+e.traceId+"-"+r+"-"+t}},getPageMetadata:function(){return{page:{referer:document.referrer,url:window.location.href}}},getCurrentScript:function(){if("undefined"!=typeof document){var e=document.currentScript;return e||g()}},getElasticScript:g,getTimeOrigin:function(){return window.performance.timing.fetchStart},generateRandomId:function(e){return l(s()).substr(0,e)},rng:s,checkSameOrigin:function e(t,r){var n=!1;if("string"==typeof r){var i=new o(t),s=new o(r);n=i.origin===s.origin}else Array.isArray(r)&&r.forEach(function(r){n||(n=e(t,r))});return n},sanitizeString:d,sanitizeObjectStrings:function e(t,r,n,i){return t?"string"==typeof t?d(t,r,n,i):(Object.keys(t).forEach(function(o){var s=t[o];"string"==typeof s?s=d(t[o],r,n,i):"object"===p(s)&&(s=e(s,r,n,i)),t[o]=s}),t):t},setTag:function(e,t,r){if(r&&e)return r[y(e)]=d(t,n.serverStringLimit),r},stripQueryStringFromUrl:function(e){return e&&e.split("?")[0]},find:function(e,t,r){if(null==e)throw new TypeError("array is null or not defined");var n=Object(e),i=n.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=0;o<i;){var s=n[o];if(t.call(r,s,o,n))return s;o++}},removeInvalidChars:y}},"./node_modules/elastic-apm-js-core/src/error-logging/error-logging.js":
/*!*****************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/error-logging/error-logging.js ***!
        \*****************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./stack-trace-service */
"./node_modules/elastic-apm-js-core/src/error-logging/stack-trace-service.js"),i=r(
/*! ../common/utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),o=function(){function e(t,r,i,o){l(this,e),this._apmServer=t,this._configService=r,this._loggingService=i,this._transactionService=o,this._stackTraceService=new n(r,i)}return f(e,[{key:"createErrorDataModel",value:function(e){var t,r=this._stackTraceService.cleanFilePath(e.filename),n=this._stackTraceService.filePathToFileName(r),o=this._stackTraceService.createStackTraces(e);if(o=this._stackTraceService.filterInvalidFrames(o),!n&&o.length){var s=o[o.length-1];n=s.filename?s.filename:"(inline script)"}t=this._stackTraceService.isFileInline(r)?"(inline script)":n;var a=e.message||e.error&&e.error.message,c=e.error?e.error.name:void 0;c||(c=a&&a.indexOf(":")>-1?a.split(":")[0]:"");var u,l=this._configService.get("context"),d=this._configService.get("serverStringLimit");e.error&&"object"===p(e.error)&&(u=this._getErrorProperties(e.error));var f=i.getPageMetadata(),h=i.merge({},f,l,u),v={id:i.generateRandomId(),culprit:i.sanitizeString(t),exception:{message:i.sanitizeString(a,void 0,!0),stacktrace:o,type:i.sanitizeString(c,d,!1)},context:h},m=this._transactionService.getCurrentTransaction();return m&&(v.trace_id=m.traceId,v.parent_id=m.id,v.transaction_id=m.id,v.transaction={type:m.type,sampled:m.sampled}),v}},{key:"logErrorEvent",value:function(e,t){if(this._configService.isActive()){if(void 0===e)return;var r=this.createErrorDataModel(e);if(void 0===r.exception.message)return;return t?this._apmServer.sendErrors([r]):this._apmServer.addError(r)}}},{key:"registerGlobalEventListener",value:function(){var e=this;window.onerror=function(t,r,n,i,o){var s;s=void 0!==t&&"string"!=typeof t?t:{message:t,filename:r,lineno:n,colno:i,error:o},e.logErrorEvent(s)}}},{key:"logError",value:function(e){var t={};return"string"==typeof e?t.message=e:t.error=e,this.logErrorEvent(t)}},{key:"_getErrorProperties",value:function(e){var t={};return Object.keys(e).forEach(function(r){if("stack"!==r){var n=e[r];if(null!==n){switch(p(n)){case"function":return;case"object":if("function"!=typeof n.toISOString)return;n=n.toISOString()}t[r]=n}}}),t}}]),e}();e.exports=o},"./node_modules/elastic-apm-js-core/src/error-logging/index.js":
/*!*********************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/error-logging/index.js ***!
        \*********************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./error-logging */
"./node_modules/elastic-apm-js-core/src/error-logging/error-logging.js");e.exports={ErrorLogging:n,registerServices:function(e){e.registerServiceCreator("ErrorLogging",function(){var t=e.getService("ApmServer"),r=e.getService("ConfigService"),i=e.getService("LoggingService"),o=e.getService("TransactionService");return new n(t,r,i,o)})}}},"./node_modules/elastic-apm-js-core/src/error-logging/stack-trace-service.js":
/*!***********************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/error-logging/stack-trace-service.js ***!
        \***********************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! error-stack-parser */
"./node_modules/elastic-apm-js-core/node_modules/error-stack-parser/error-stack-parser.js"),i=function(){function e(t,r){l(this,e),this._configService=t,this._loggingService=r}return f(e,[{key:"createStackTraces",value:function(e){var t,r=this,i=e.error;if(i)try{t=n.parse(i)}catch(e){this._loggingService.debug("Parsing error stack failed!",e)}return t&&0!==t.length||(t=[{fileName:e.filename,lineNumber:e.lineno,columnNumber:e.colno}]),t=(t=function(e){return e.map(function(e){return e.functionName&&(e.functionName=function(e){var t=e.split("/");e=t.length>1?["Object",t[t.length-1]].join("."):t[0];e=(e=e.replace(/.<$/gi,".<anonymous>")).replace(/^Anonymous function$/,"<anonymous>"),e=(t=e.split(".")).length>1?t[t.length-1]:t[0];return e}(e.functionName)),e})}(t)).map(function(e){if(!e.fileName&&!e.lineNumber)return{};if(!e.columnNumber&&!e.lineNumber)return{};var t=r.cleanFilePath(e.fileName),n=r.filePathToFileName(t);return r.isFileInline(t)&&(n="(inline script)"),{abs_path:e.fileName,filename:n,function:e.functionName||"<anonymous>",lineno:e.lineNumber,colno:e.columnNumber}})}},{key:"filterInvalidFrames",value:function(e){var t=[];return Array.isArray(e)&&(t=e.filter(function(e){return void 0!==e.filename&&void 0!==e.lineno})),t}},{key:"filePathToFileName",value:function(e){var t=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return e.indexOf(t)>-1&&(e=e.replace(t+"/","")),e}},{key:"cleanFilePath",value:function(e){return e||(e=""),"<anonymous>"===e&&(e=""),e}},{key:"isFileInline",value:function(e){return!!e&&0===window.location.href.indexOf(e)}}]),e}();e.exports=i},"./node_modules/elastic-apm-js-core/src/index.js":
/*!*******************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/index.js ***!
        \*******************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./error-logging */
"./node_modules/elastic-apm-js-core/src/error-logging/index.js"),i=r(
/*! ./performance-monitoring */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/index.js"),o=r(
/*! ./common/service-factory */
"./node_modules/elastic-apm-js-core/src/common/service-factory.js"),s=r(
/*! ./common/utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),a=r(
/*! ./common/patching */
"./node_modules/elastic-apm-js-core/src/common/patching/index.js");e.exports={createServiceFactory:function(){var e=new o;return e.registerCoreServices(),n.registerServices(e),i.registerServices(e),e},ServiceFactory:o,patching:a,utils:s}},"./node_modules/elastic-apm-js-core/src/performance-monitoring/capture-hard-navigation.js":
/*!************************************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/capture-hard-navigation.js ***!
        \************************************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./span */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/span.js"),i=r(
/*! ../common/url */
"./node_modules/elastic-apm-js-core/src/common/url.js"),o=[["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']],s=3e5;function a(e,t){var r=t.duration();return r<s&&r>0&&t._start<=e._end&&t._end<=e._end}function c(e,t){for(var r=[],i=0;i<o.length;i++){var a=e[o[i][0]],c=e[o[i][1]];if(t&&a&&c&&c>a&&a>=t&&c-a<s&&a-t<s&&c-t<s){var u=new n(o[i][2],"hard-navigation.browser-timing");"requestStart"===o[i][0]&&(u.pageResponse=!0),u._start=a-t,u.ended=!0,u._end=c-t,r.push(u)}}return r}function u(e,t){for(var r=[],o=0;o<e.length;o++){var a=e[o];if((!a.initiatorType||"xmlhttprequest"!==a.initiatorType)&&a.name)if("css"!==a.initiatorType&&"img"!==a.initiatorType&&"script"!==a.initiatorType&&"link"!==a.initiatorType){for(var c=!1,u=0;u<t.length;u++){var l=a.name.lastIndexOf(t[u]);if(l>-1&&l===a.name.length-t[u].length){c=!0;break}}if(c)continue}else{var d="resource";a.initiatorType&&(d+="."+a.initiatorType);var f=a.startTime,p=a.responseEnd;if("number"==typeof f&&"number"==typeof p&&f>=0&&p>f&&p-f<s&&f<s&&p<s){var h=new i(a.name),v=h.origin+h.path,m=new n(v||a.name,d);m.addContext({http:{url:a.name}}),m._start=f,m.ended=!0,m._end=p,r.push(m)}}}return r}e.exports={captureHardNavigation:function(e){if(e.isHardNavigation&&window.performance&&window.performance.timing){var t=window.performance.timing,r=t.fetchStart;e._start=0,e.type="page-load",c(t,r).forEach(function(t){a(e,t)&&(t.traceId=e.traceId,t.sampled=e.sampled,e.options.pageLoadSpanId&&t.pageResponse&&(t.id=e.options.pageLoadSpanId),e.spans.push(t))}),window.performance.getEntriesByType&&u(window.performance.getEntriesByType("resource"),e.spans.filter(function(e){return"external"===e.type&&"http"===e.subType}).map(function(e){return e.name.split(" ")[1]})).forEach(function(t){a(e,t)&&e.spans.push(t)}),e._adjustStartToEarliestSpan(),e._adjustEndToLatestSpan(),e.addNavigationTimingMarks()}},createNavigationTimingSpans:c,createResourceTimingSpans:u}},"./node_modules/elastic-apm-js-core/src/performance-monitoring/index.js":
/*!******************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/index.js ***!
        \******************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./performance-monitoring */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/performance-monitoring.js"),i=r(
/*! ./transaction-service */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction-service.js");e.exports={PerformanceMonitoring:n,registerServices:function(e){e.registerServiceCreator("TransactionService",function(){var t=e.getService("ConfigService"),r=e.getService("LoggingService");return new i(r,t)}),e.registerServiceCreator("PerformanceMonitoring",function(){var t=e.getService("ConfigService"),r=e.getService("LoggingService"),i=e.getService("ApmServer"),o=e.getService("TransactionService");return new n(i,t,r,o)})}}},"./node_modules/elastic-apm-js-core/src/performance-monitoring/performance-monitoring.js":
/*!***********************************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/performance-monitoring.js ***!
        \***********************************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ../common/utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),i=n.sanitizeObjectStrings,o=n.sanitizeString,s=n.checkSameOrigin,a=n.isDtHeaderValid,c=n.getDtHeaderValue,u=n.merge,d=n.stripQueryStringFromUrl,p=n.parseDtHeaderValue,h=r(
/*! ../common/patching */
"./node_modules/elastic-apm-js-core/src/common/patching/index.js").subscription,v=r(
/*! ../common/patching/patch-utils */
"./node_modules/elastic-apm-js-core/src/common/patching/patch-utils.js").globalState,m=r(
/*! ../common/constants */
"./node_modules/elastic-apm-js-core/src/common/constants.js"),g=m.SCHEDULE,y=m.INVOKE,_=m.XMLHTTPREQUEST_SOURCE,b=m.FETCH_SOURCE,w=function(){function e(t,r,n,i){l(this,e),this._apmServer=t,this._configService=r,this._logginService=n,this._transactionService=i}return f(e,[{key:"init",value:function(){var e=this;this._transactionService.subscribe(function(t){var r=e.createTransactionPayload(t);r&&e._apmServer.addTransaction(r)});var t=this.getXhrPatchSubFn(this._configService,this._transactionService);this.cancelPatchSub=h.subscribe(t)}},{key:"getXhrPatchSubFn",value:function(){var e=this._configService,t=this._transactionService,r=this;return function(n,i){if(i.source===_&&!v.fetchInProgress||i.source===b)if(n===g&&i.data){var o=i.data.method+" "+d(i.data.url),a=t.startSpan(o,"external.http");if(a){var c=e.get("distributedTracing"),u=e.get("distributedTracingOrigins"),l=s(i.data.url,window.location.href)||s(i.data.url,u),f=i.data.target;c&&l&&f&&r.injectDtHeader(a,f),a.addContext({http:{method:i.data.method,url:i.data.url}}),a.sync=i.data.sync,i.data.span=a}}else n===y&&i.data&&i.data.span&&(void 0!==i.data.target.status?i.data.span.addContext({http:{status_code:i.data.target.status}}):i.data.response&&i.data.span.addContext({http:{status_code:i.data.response.status}}),i.data.span.end())}}},{key:"injectDtHeader",value:function(e,t){var r=this._configService,n=r.get("distributedTracingHeaderName"),i=r.get("distributedTracingHeaderValueCallback");"function"!=typeof i&&(i=c);var o=i(e),s=a(o);n&&o&&s&&("function"==typeof t.setRequestHeader?t.setRequestHeader(n,o):t.headers&&"function"==typeof t.headers.append?t.headers.append(n,o):t[n]=o)}},{key:"extractDtHeader",value:function(e){var t=this._configService.get("distributedTracingHeaderName");if(e)return p(e[t])}},{key:"setTransactionContext",value:function(e){var t=this._configService.get("context");t&&e.addContext(t)}},{key:"filterTransaction",value:function(e){var t=this._configService.get("transactionDurationThreshold"),r=e.duration();if(!r||r>t||!e.spans.length)return!1;e.sampled||e.resetSpans();var n=this._configService.get("browserResponsivenessInterval");if(this._configService.get("checkBrowserResponsiveness")&&!e.isHardNavigation){var i=this._configService.get("browserResponsivenessBuffer");if(!this.checkBrowserResponsiveness(e,n,i))return this._logginService.debug("Transaction was discarded! browser was not responsive enough during the transaction."," duration:",r," browserResponsivenessCounter:",e.browserResponsivenessCounter,"interval:",n),!1}return!0}},{key:"prepareTransaction",value:function(e){if(e.spans.sort(function(e,t){return e._start-t._start}),this._configService.get("groupSimilarSpans")){var t=this._configService.get("similarSpanThreshold");e.spans=this.groupSmallContinuouslySimilarSpans(e,t)}e.spans=e.spans.filter(function(t){return t.duration()>0&&t._start>=e._start&&t._end>e._start&&t._start<e._end&&t._end<=e._end}),this.setTransactionContext(e)}},{key:"createTransactionDataModel",value:function(e){var t=this._configService.get("context"),r=this._configService.get("serverStringLimit"),n=e._start,s=e.spans.map(function(t){var s;return t.context&&(s=i(t.context,r)),{id:t.id,transaction_id:e.id,parent_id:t.parentId||e.id,trace_id:e.traceId,name:o(t.name,r,!0),type:o(t.type,r,!0),subType:o(t.subType,r,!0),action:o(t.action,r,!0),sync:t.sync,start:t._start-n,duration:t.duration(),context:s}}),a=u({},t,e.context);return{id:e.id,trace_id:e.traceId,name:o(e.name,r,!1),type:o(e.type,r,!0),duration:e.duration(),spans:s,context:a,marks:e.marks,span_count:{started:s.length},sampled:e.sampled}}},{key:"createTransactionPayload",value:function(e){if(this.prepareTransaction(e),this.filterTransaction(e))return this.createTransactionDataModel(e)}},{key:"sendTransactions",value:function(e){var t=e.map(this.createTransactionPayload.bind(this)).filter(function(e){return e});return this._logginService.debug("Sending Transactions to apm server.",e.length),this._apmServer.sendTransactions(t)}},{key:"convertTransactionsToServerModel",value:function(e){return e.map(this.createTransactionDataModel.bind(this))}},{key:"groupSmallContinuouslySimilarSpans",value:function(e,t){var r=e.duration(),n=[],i=1;return e.spans.forEach(function(o,s){if(0===n.length)n.push(o);else{var a=n[n.length-1],c=a.type===o.type&&a.subType===o.subType&&a.action===o.action&&a.name===o.name&&o.duration()/r<t&&(o._start-a._end)/r<t,u=e.spans.length===s+1;c&&(i++,a._end=o._end),i>1&&(!c||u)&&(a.name=i+"x "+a.name,i=1),c||n.push(o)}}),n}},{key:"checkBrowserResponsiveness",value:function(e,t,r){var n=e.browserResponsivenessCounter;if(void 0===t||void 0===n)return!0;var i=e.duration();return n+r>=Math.floor(i/t)}}]),e}();e.exports=w},"./node_modules/elastic-apm-js-core/src/performance-monitoring/span-base.js":
/*!**********************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/span-base.js ***!
        \**********************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ../common/utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),i=n.isUndefined,o=n.generateRandomId,s=n.setTag,a=n.merge,c=function(){function e(t,r,n){l(this,e),this.options=n||{},this.name=t||this.options.name||"Unknown",this.type=r||this.options.type||"custom",this.id=this.options.id||o(16),this.traceId=this.options.traceId,this.sampled=this.options.sampled,this.timestamp=this.options.timestamp||Date.now(),this.ended=!1,this._start=window.performance.now(),this._end=void 0,this.onEnd=this.options.onEnd}return f(e,[{key:"ensureContext",value:function(){this.context||(this.context={})}},{key:"addTags",value:function(e){this.ensureContext();var t=this.context;t.tags||(t.tags={}),Object.keys(e).forEach(function(r){s(r,e[r],t.tags)})}},{key:"addContext",value:function(e){e&&(this.ensureContext(),a(this.context,e))}},{key:"end",value:function(){this.ended||(this.ended=!0,this._end=window.performance.now(),this.callOnEnd())}},{key:"callOnEnd",value:function(){"function"==typeof this.onEnd&&this.onEnd(this)}},{key:"duration",value:function(){if(i(this._end)||i(this._start))return null;var e=this._end-this._start;return parseFloat(e)}}]),e}();e.exports=c},"./node_modules/elastic-apm-js-core/src/performance-monitoring/span.js":
/*!*****************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/span.js ***!
        \*****************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./span-base */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/span-base.js"),i=function(e){function t(e,r,n){var i;if(l(this,t),(i=s(this,a(t).call(this,e,r,n))).parentId=i.options.parentId,i.subType=void 0,i.action=void 0,-1!==i.type.indexOf(".")){var o=i.type.split(".",3);i.type=o[0],i.subType=o[1],i.action=o[2]}return i.sync=i.options.sync,i}return c(t,n),t}();e.exports=i},"./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction-service.js":
/*!********************************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction-service.js ***!
        \********************************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./transaction */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction.js"),i=r(
/*! ../common/utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),o=r(
/*! ../common/subscription */
"./node_modules/elastic-apm-js-core/src/common/subscription.js"),s=r(
/*! ./capture-hard-navigation */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/capture-hard-navigation.js").captureHardNavigation,a=function(){function e(t,r){l(this,e),void 0===r&&t.debug("TransactionService: config is not provided"),this._config=r,this._logger=t,this.marks={},this.currentTransaction=void 0,this._subscription=new o,this._alreadyCapturedPageLoad=!1}return f(e,[{key:"shouldCreateTransaction",value:function(){return this._config.isActive()}},{key:"getOrCreateCurrentTransaction",value:function(){if(this.shouldCreateTransaction()){var e=this.getCurrentTransaction();return i.isUndefined(e)||e.ended?this.createZoneTransaction():e}}},{key:"getCurrentTransaction",value:function(){return this.currentTransaction}},{key:"setCurrentTransaction",value:function(e){this.currentTransaction=e}},{key:"createTransaction",value:function(e,t,r){var o=r;if(i.isUndefined(o)&&(o=this._config.config),this.shouldCreateTransaction()){var s=new n(e,t,o);return this.setCurrentTransaction(s),o.checkBrowserResponsiveness&&this.startCounter(s),s}}},{key:"createZoneTransaction",value:function(){return this.createTransaction("ZoneTransaction","transaction")}},{key:"startCounter",value:function(e){e.browserResponsivenessCounter=0;var t=this._config.get("browserResponsivenessInterval");void 0!==t?this.runOuter(function(){var r=setInterval(function(){e.ended?window.clearInterval(r):e.browserResponsivenessCounter++},t)}):this._logger.debug("browserResponsivenessInterval is undefined!")}},{key:"sendPageLoadMetrics",value:function(e){var t=this.startTransaction(e,"page-load");return t.detectFinish(),t}},{key:"capturePageLoadMetrics",value:function(e){if(this._config.get("capturePageLoad")&&!this._alreadyCapturedPageLoad&&e.isHardNavigation)return e.addMarks(this.marks),s(e),this._alreadyCapturedPageLoad=!0,!0}},{key:"startTransaction",value:function(e,t,r){var n=this,o=n._config.config,s=i.extend({pageLoadTraceId:o.pageLoadTraceId,pageLoadSampled:o.pageLoadSampled,pageLoadSpanId:o.pageLoadSpanId,pageLoadTransactionName:o.pageLoadTransactionName,transactionSampleRate:o.transactionSampleRate},r);t||(t="custom"),e||(e="Unknown");var a=this.getOrCreateCurrentTransaction();if(a)return"ZoneTransaction"===a.name?a.redefine(e,t,s):(this._logger.debug("Ending old transaction",a),a.end(),a=this.createTransaction(e,t,s)),"page-load"===t&&(a.isHardNavigation=!0,s.pageLoadTraceId&&(a.traceId=s.pageLoadTraceId),void 0!==s.pageLoadSampled&&(a.sampled=s.pageLoadSampled),"Unknown"===a.name&&o.pageLoadTransactionName&&(a.name=o.pageLoadTransactionName)),this._logger.debug("TransactionService.startTransaction",a),a.onEnd=function(){n.applyAsync(function(){(n._logger.debug("TransactionService transaction finished",a),n.shouldIgnoreTransaction(a.name))||("page-load"===t?("Unknown"===a.name&&n._config.get("pageLoadTransactionName")&&(a.name=n._config.get("pageLoadTransactionName")),n.capturePageLoadMetrics(a)&&n.add(a)):n.add(a))})},a}},{key:"applyAsync",value:function(e,t,r){return this.runOuter(function(){return Promise.resolve().then(function(){return e.apply(t,r)},function(e){console.log(e)})})}},{key:"shouldIgnoreTransaction",value:function(e){for(var t=this._config.get("ignoreTransactions"),r=0;r<t.length;r++){var n=t[r];if("function"==typeof n.test){if(n.test(e))return!0}else if(n===e)return!0}return!1}},{key:"startSpan",value:function(e,t,r){var n=this.getOrCreateCurrentTransaction();if(n)return this._logger.debug("TransactionService.startSpan",e,t),n.startSpan(e,t,r)}},{key:"add",value:function(e){this._config.isActive()&&(this._subscription.applyAll(this,[e]),this._logger.debug("TransactionService.add",e))}},{key:"subscribe",value:function(e){return this._subscription.subscribe(e)}},{key:"addTask",value:function(e){var t=this.getOrCreateCurrentTransaction();return t&&(t.addTask(e),this._logger.debug("TransactionService.addTask",e)),e}},{key:"removeTask",value:function(e){var t=this.getCurrentTransaction();i.isUndefined(t)||t.ended||(t.removeTask(e),this._logger.debug("TransactionService.removeTask",e))}},{key:"detectFinish",value:function(){var e=this.getCurrentTransaction();i.isUndefined(e)||e.ended||(e.detectFinish(),this._logger.debug("TransactionService.detectFinish"))}},{key:"runOuter",value:function(e,t,r){return e.apply(t,r)}}]),e}();e.exports=a},"./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction.js":
/*!************************************************************************************!*\
        !*** ./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction.js ***!
        \************************************************************************************/
/*! no static exports found */
function(e,t,r){var n=r(
/*! ./span */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/span.js"),i=r(
/*! ./span-base */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/span-base.js"),o=r(
/*! ../common/utils */
"./node_modules/elastic-apm-js-core/src/common/utils.js"),u=o.generateRandomId,d=o.getNavigationTimingMarks,p=o.getPaintTimingMarks,h=o.merge,v=o.extend,m=o.getPageMetadata,g=o.removeInvalidChars,y=function(e){function t(e,r,n){var i;return l(this,t),(i=s(this,a(t).call(this,e,r,n))).traceId=u(),i.marks=void 0,i.spans=[],i._activeSpans={},i._scheduledTasks={},i.nextAutoTaskId=0,i.isHardNavigation=!1,i.sampled=Math.random()<=i.options.transactionSampleRate,i}return c(t,i),f(t,[{key:"addNavigationTimingMarks",value:function(){var e=d(),t=p();if(e){var r={timeToFirstByte:e.responseStart,domInteractive:e.domInteractive,domComplete:e.domComplete};t["first-contentful-paint"]&&(r.firstContentfulPaint=t["first-contentful-paint"]),this.addMarks({navigationTiming:e,agent:r})}}},{key:"addMarks",value:function(e){this.marks=h(this.marks||{},e)}},{key:"mark",value:function(e){var t=g(e),r=window.performance.now()-this._start,n={};n[t]=r,this.addMarks({custom:n})}},{key:"redefine",value:function(e,t,r){this.name=e,this.type=t,this.options=r}},{key:"startSpan",value:function(e,t,r){if(!this.ended){var i=this,o=v({},r);o.onEnd=function(e){i._onSpanEnd(e)},o.traceId=this.traceId,o.sampled=this.sampled,o.parentId||(o.parentId=this.id);var s=new n(e,t,o);return this._activeSpans[s.id]=s,s}}},{key:"isFinished",value:function(){return 0===Object.keys(this._scheduledTasks).length}},{key:"detectFinish",value:function(){this.isFinished()&&this.end()}},{key:"end",value:function(){if(!this.ended){for(var e in this.ended=!0,this._end=window.performance.now(),this._activeSpans){var t=this._activeSpans[e];t.type=t.type+".truncated",t.end()}var r=m();this.addContext(r),this._adjustStartToEarliestSpan(),this._adjustEndToLatestSpan(),this.callOnEnd()}}},{key:"addTask",value:function(e){return void 0===e&&(e="autoId"+this.nextAutoTaskId++),this._scheduledTasks[e]=e,e}},{key:"removeTask",value:function(e){delete this._scheduledTasks[e],this.detectFinish()}},{key:"addEndedSpans",value:function(e){this.spans=this.spans.concat(e)}},{key:"resetSpans",value:function(){this.spans=[]}},{key:"_onSpanEnd",value:function(e){this.spans.push(e),delete this._activeSpans[e.id]}},{key:"_adjustEndToLatestSpan",value:function(){var e=function(e){for(var t=null,r=0;r<e.length;r++){var n=e[r];n.type&&-1===n.type.indexOf("ext")&&"transaction"!==n.type&&(!t||t._end<n._end)&&(t=n)}return t}(this.spans);if(e){this._end=e._end;for(var t=0;t<this.spans.length;t++){var r=this.spans[t];r._end>this._end&&(r._end=this._end,r.type=r.type+".truncated"),r._start>this._end&&(r._start=this._end)}}}},{key:"_adjustStartToEarliestSpan",value:function(){var e=function(e){var t=null;return e.forEach(function(e){t||(t=e),t&&t._start>e._start&&(t=e)}),t}(this.spans);e&&e._start<this._start&&(this._start=e._start)}}]),t}();e.exports=y},"./node_modules/uuid/lib/rng-browser.js":
/*!**********************************************!*\
        !*** ./node_modules/uuid/lib/rng-browser.js ***!
        \**********************************************/
/*! no static exports found */
function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"./src/services/report/kibanaApm/api.ts":
/*!**********************************************!*\
        !*** ./src/services/report/kibanaApm/api.ts ***!
        \**********************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUserInfo=function(e){this.tracerTransaction.setUserInfo(e)},t.captureError=function(e){return this.tracerTransaction.captureError(e)},t.createCustomLog=function(e,t,r){return void 0===t&&(t="custome"),this.tracerTransaction.createCustomEventTransaction(e,t,r)}},"./src/services/report/kibanaApm/defaultConfig.ts":
/*!********************************************************!*\
        !*** ./src/services/report/kibanaApm/defaultConfig.ts ***!
        \********************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={serverUrl:null,serviceName:"undefined",agentVersion:"undefined",automaticStart:!0,isCatchPageload:!0,isCatchError:!0,transactionDurationThreshold:1e21,flushInterval:0,errorThrottleInterval:0,transactionThrottleInterval:0}},"./src/services/report/kibanaApm/handle.ts":
/*!*************************************************!*\
        !*** ./src/services/report/kibanaApm/handle.ts ***!
        \*************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index");t._getReportContent=function(e){if(!(e&&e.type&&e.typeName&&e.data))return n.consoleTools.warnError("reportServer receive reportData is not right : typeName and type and data is undefined "),!1;switch(e.type){case"monitor":this._handleMonitor(e);break;case"custome":case"analyse":case"performance":case"undefined":default:n.consoleTools.warnError(e.type+"is no handle type")}},t._handleCatchError=function(){var e=this;this.tracerTransaction.watchCatchError(function(t){e.sendMessage({type:"monitor",typeName:"error",data:t,isError:!0})})}},"./src/services/report/kibanaApm/index.ts":
/*!************************************************!*\
        !*** ./src/services/report/kibanaApm/index.ts ***!
        \************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(
/*! ./defaultConfig */
"./src/services/report/kibanaApm/defaultConfig.ts")),a=r(
/*! @util/index */
"@util/index"),c=o(r(
/*! ./transaction */
"./src/services/report/kibanaApm/transaction.ts")),u=r(
/*! ./handle */
"./src/services/report/kibanaApm/handle.ts"),l=r(
/*! ./api */
"./src/services/report/kibanaApm/api.ts"),d=r(
/*! ./monitor */
"./src/services/report/kibanaApm/monitor.ts"),f=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;r._getReportContent=u._getReportContent.bind(r),r._handleCatchError=u._handleCatchError.bind(r),r._handleMonitor=d._handleMonitor.bind(r),r._handleMonitorLog=d._handleMonitorLog.bind(r),r._handleMonitorNetwork=d._handleMonitorNetwork.bind(r),r._handleHtmlElementActive=d._handleHtmlElementActive.bind(r),r._handleKibanaApmTrack=d._handleKibanaApmTrack.bind(r),r.setUserInfo=l.setUserInfo.bind(r),r.captureError=l.captureError.bind(r),r.createCustomLog=l.createCustomLog.bind(r);var n=t,o=n.kibanaApmConfig,f=void 0!==o&&o,p=n.develop,h=void 0!==p&&p,v=f||t;return v.develop=h,r._config=a.Tools.extend(i({},s.default),v),r.sendMessage=function(){return a.consoleTools.warnError("sendMessage is not active, apply receive sendPipeMessage fail ")},r.tracerTransaction=new c.default(r._config),r}return n(t,e),t.prototype.apply=function(e){var t=e.registerReciveMessage,r=e.sendMessage;t(this._getReportContent,this),this.sendMessage=r;var n=this._config,i=n.isCatchPageload,o=n.isCatchError;return i&&this.tracerTransaction.pageLoad(),o&&(this.tracerTransaction.catchError(),this._handleCatchError()),{setUserInfo:this.setUserInfo,captureError:this.captureError,createCustomLog:this.createCustomLog}},t}(a.KeepObserverPublic);t.default=f},"./src/services/report/kibanaApm/monitor.ts":
/*!**************************************************!*\
        !*** ./src/services/report/kibanaApm/monitor.ts ***!
        \**************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(
/*! @util/index */
"@util/index");t._handleMonitor=function(e){switch(e.typeName){case"log":return this._handleMonitorLog(e);case"network":return this._handleMonitorNetwork(e);case"htmlElementActive":return this._handleHtmlElementActive(e);case"kibanaApmTrack":return this._handleKibanaApmTrack(e);case"error":return i.consoleTools.warnError("kibanaAPM has a error is monitor of self, is not handle monitor error report");default:return}},t._handleMonitorLog=function(e){var t=e.data,r=t.type,n=void 0===r?"":r,i=t.data,o=void 0===i?"":i,s=e.type+"-"+e.typeName,a=this.tracerTransaction.createCustomEventTransaction(s,e.typeName);a.addTags({type:n,data:o}),a.end()},t._handleMonitorNetwork=function(e){var t=e.data,r=t.method,n=void 0===r?"":r,o=t.statusType,s=void 0===o?"":o,a=t.type,c=void 0===a?"":a,u=t.url,l=void 0===u?"":u,d=t.requestHead,f=void 0===d?null:d,p=t.responseHead,h=void 0===p?null:p,v=t.params,m=void 0===v?null:v,g=t.body,y=void 0===g?"":g,_=t.status,b=void 0===_?0:_,w=t.startTime,S=void 0===w?0:w,T=t.endTime,k=void 0===T?0:T,j=t.costTime,O=void 0===j?0:j,x=t.response,E=void 0===x?"":x,M=t.responseType,P=void 0===M?"":M,C=t.timeout,L=void 0===C?0:C,N=t.errorContent,R=void 0===N?"":N,A=t.isTimeout,I=void 0!==A&&A,H=t.isError,D=void 0!==H&&H;if("request"!==s){var F=e.type+"-"+e.typeName,U=this.tracerTransaction.createCustomEventTransaction(F,e.typeName);U.addTags({method:n,url:l,statusType:s,type:c,requestHead:i.Tools.objectStringify(f),responseHead:i.Tools.objectStringify(h),params:i.Tools.objectStringify(m),body:y,status:b,startTime:S,endTime:k,costTime:O,response:E,responseType:P,timeout:L,errorContent:R,isTimeout:I,isError:D}),U.end()}},t._handleHtmlElementActive=function(e){var t=e.type+"-"+e.typeName,r=this.tracerTransaction.createCustomEventTransaction(t,e.typeName),n=e.data,i=n.type,o=n.title,s=n.xPath,a=n.value;r.addTags({type:i,title:o,xPath:s,value:a}),r.end()},t._handleKibanaApmTrack=function(e){var t=e.type+"-"+e.typeName,r=this.tracerTransaction.createCustomEventTransaction(t,e.typeName),i=e.data,o=i.tags,s=i.spans,a=i.type,c=i.url;r.addTags(n({},o,{type:a,url:c})),s.forEach(function(e){var t=e.name,n=e.type,i=e.tags,o=void 0===i?null:i,s=r.startSpan(t,n);if(o)switch(o.type){case"log":var a=o.content;return void s.addTags({type:a.type,data:a.data});case"error":var c=o.content,u=c.message,l=c.filename,d=void 0===l?"Unknown":l;s.addTags({message:u,filename:d});case"network":var f=o.content,p=f.method,h=void 0===p?"":p,v=f.url,m=void 0===v?"":v,g=f.params,y=void 0===g?null:g,_=f.body,b=void 0===_?"":_,w=f.status,S=void 0===w?0:w,T=f.startTime,k=void 0===T?0:T,j=f.endTime,O=void 0===j?0:j,x=f.costTime,E=void 0===x?0:x,M=f.response,P=void 0===M?"":M,C=f.timeout,L=void 0===C?0:C;return void s.addTags({method:h,url:m,params:y,body:b,status:S,startTime:k,endTime:O,costTime:E,response:P,timeout:L});case"htmlElementActive":var N=o.content,R=N.type,A=N.title,I=N.xPath,H=N.value;return void s.addTags({type:R,title:A,xPath:I,value:H})}}),r.end()}},"./src/services/report/kibanaApm/transaction.ts":
/*!******************************************************!*\
        !*** ./src/services/report/kibanaApm/transaction.ts ***!
        \******************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(
/*! elastic-apm-js-core/src/performance-monitoring/transaction */
"./node_modules/elastic-apm-js-core/src/performance-monitoring/transaction.js")),o=r(
/*! elastic-apm-js-core */
"./node_modules/elastic-apm-js-core/src/index.js"),s=r(
/*! @util/index */
"@util/index"),a=function(){function e(e){var t=this;this.Initialized=!1,this.initCustomTransaction=function(e){t.customServiceFactory=o.createServiceFactory(),t.customServiceFactory.getService("ConfigService").setConfig(e),t.customServiceFactory.init(),t.Customonitoring=t.customServiceFactory.getService("PerformanceMonitoring"),t.Customonitoring.init(),t.Customonitoring.cancelPatchSub(),t.ApmServer=t.serviceFactory.getService("ApmServer"),t.Initialized=!0},this.createTransaction=function(e,r){return t.serviceFactory.getService("TransactionService").startTransaction(e,r)},this.setUserInfo=function(e){t.serviceFactory.getService("ConfigService").setUserContext(e),t.customServiceFactory.getService("ConfigService").setUserContext(e)},this.createCustomEventTransaction=function(e,r,n){var o=t;if(!o.Initialized)return!1;var a=s.Tools.extend({transactionSampleRate:1},n),c=new i.default(e,r,a);return Object.defineProperty(c,"onEnd",{enumerable:!1,configurable:!1,writable:!1,value:function(){if(this instanceof i.default){o.Customonitoring.prepareTransaction(this);var e=o.Customonitoring.createTransactionDataModel(this);o.ApmServer.addTransaction(e)}}}),c},this.serviceFactory=o.createServiceFactory(),this.configService=this.serviceFactory.getService("ConfigService"),this.configService.setConfig(e),this.serviceFactory.init(),this.initCustomTransaction(e)}return e.prototype.pageLoad=function(){var e=this.serviceFactory.getService("PerformanceMonitoring");if(e.init(),this.configService.get("sendPageLoadTransaction")){var t=this.serviceFactory.getService("TransactionService").startTransaction(window.location.href,"page-load"),r=function(){setTimeout(function(){t&&(t.detectFinish(),e.cancelPatchSub())})};"complete"===document.readyState?r():window.addEventListener("load",r.bind(this))}},e.prototype.catchError=function(){this.serviceFactory.getService("ErrorLogging").registerGlobalEventListener()},e.prototype.captureError=function(e){return this.serviceFactory.getService("ErrorLogging").logError(e)},e.prototype.watchCatchError=function(e){var t=this.serviceFactory.getService("ErrorLogging"),r=t.logErrorEvent;t.logErrorEvent=function(n,i){return e(n),r.apply(t,n,i)}},e}();t.default=a},"@util/index":
/*!******************************!*\
        !*** external "@util/index" ***!
        \******************************/
/*! no static exports found */
function(t,r){t.exports=e}})})}).call(this,r(1)(e))},function(e,t,r){(function(e){var n,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,c){"object"===s(t)&&"object"===s(e)?e.exports=c(r(0)):(i=[r(0)],void 0===(o="function"==typeof(n=c)?n.apply(t,i):n)||(e.exports=o))}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/services/middleware/kibanaApmTrack/index.ts")}({"./src/services/middleware/kibanaApmTrack/api.ts":
/*!*******************************************************!*\
        !*** ./src/services/middleware/kibanaApmTrack/api.ts ***!
        \*******************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelTrack=function(){this.isCancelTrack=!0},t.startTrack=function(){this.isCancelTrack=!1},t.cancelPatch=function(){window.removeEventListener("hashchange",this._handleHashPageChange),window.history.pushState=this._pushState,window.history.replaceState=this._replaceState}},"./src/services/middleware/kibanaApmTrack/defaultConfig.ts":
/*!*****************************************************************!*\
        !*** ./src/services/middleware/kibanaApmTrack/defaultConfig.ts ***!
        \*****************************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isInterruptNormal:!1,automaticStart:!0,reportDateFormat:"yyyy-MM-dd hh:mm:ss"}},"./src/services/middleware/kibanaApmTrack/handleMiddle.ts":
/*!****************************************************************!*\
        !*** ./src/services/middleware/kibanaApmTrack/handleMiddle.ts ***!
        \****************************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(
/*! @util/index */
"@util/index");t._handleReciceReportMessage=function(e,t){var r=this;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var c=r._config.isInterruptNormal,u=n(s,1)[0],l=void 0===u?{}:u,d=l.type,f=void 0!==d&&d,p=l.typeName,h=l.isError,v=void 0!==h&&h;if(r.isSendlock=!0,!r.isCancelTrack&&f&&o.Tools.isString(f)&&"monitor"===f){switch(p){case"log":r._handleTrackLog(l);break;case"network":r._handleTrackNetwork(l);break;case"htmlElementActive":r._handleTrackHtmlElementActive(l);break;case"error":r._handleTrackError(l);break;case"kibanaApmTrack":return t.apply(void 0,i(s));default:return o.consoleTools.warnError("is no support track typeName:"+p),t.apply(void 0,i(s))}return c&&!v?e(!1):t.apply(void 0,i(s))}t.apply(void 0,i(s))}},t._handleTrackLog=function(e){this.trackList.push(e),"error"===e.data.type&&(this.isWaitSend="pageError",this.errorContent=o.Tools.objectStringify(e.data),this._handleSendTrackMessage())},t._handleTrackNetwork=function(e){this.trackList.push(e),e.data.isError&&(this.isWaitSend="pageError",this.errorContent=o.Tools.objectStringify(e.data),this._handleSendTrackMessage())},t._handleTrackHtmlElementActive=function(e){this.trackList.push(e)},t._handleTrackError=function(e){this.trackList.push(e),this.isWaitSend="pageError",this.errorContent=o.Tools.objectStringify(e.data),this._handleSendTrackMessage()},t._handleSendTrackMessage=function(){var e=null,t=this._config.develop;switch(this.isWaitSend){case"pageError":if(this.isSendlock)return;this.isWaitSend=!1,e=this._handleCreateReport("pageError"),this.errorContent="";break;case"pageHashChange":if(this.isSendlock)return;this.isWaitSend=!1,e=this._handleCreateReport("pageHashChange"),this._pageStart()}e&&(e.data&&"pageHashChange"===e.data.type&&(this.trackList=[],this.isPageChangeHandle=!1),t&&o.consoleTools.log("track-reportData",e),this.sendMessage(e))},t._handleCreateReport=function(e){var t=this,r=this._config,n=r.reportDateFormat,i=r.isInterruptNormal,s=(new Date).getTime(),a={type:e,url:window.location.href,tags:null,spans:[]};switch(e){case"pageHashChange":a.tags=this.pageInfo;break;case"pageError":a.tags={startUrl:this.pageInfo.startUrl,startDate:this.pageInfo.startDate,findErrorDate:o.Tools.dateFormat(s,n),errorContent:this.errorContent};break;default:return!1}return a.spans=this.trackList.map(function(e){var r=t._config.reportDateFormat,n=e.typeName,s=e.reportTime,a=e.data,c="undefined",u=e.type+"-"+n+":"+o.Tools.dateFormat(s,r),l=null;switch(n){case"log":c=a.type+"->"+o.Tools.substringLimt(a.data),l={type:n,content:a};break;case"network":var d=a.method,f=void 0===d?"":d,p=a.url,h=void 0===p?"":p,v=a.params,m=void 0===v?null:v,g=a.status,y=void 0===g?0:g,_=a.response,b=void 0===_?"":_,w=a.body,S=void 0===w?"":w,T=a.startTime,k=void 0===T?0:T,j=a.endTime,O=void 0===j?0:j,x=a.costTime,E=void 0===x?0:x,M=a.timeout,P=void 0===M?void 0:M;c=a.type+"->"+f+":"+h+"("+a.statusType+":"+y+(b?"->"+o.Tools.substringLimt(b)+")":")"),l={type:n,content:{method:f,url:h,params:m?o.Tools.objectStringify(m):"",body:S,status:y,startTime:k,endTime:O,costTime:E,response:b,timeout:P}};break;case"htmlElementActive":c=a.type+"->"+a.title+"(xpath:"+a.xPath+")"+("change"===a.type?"->"+o.Tools.substringLimt(a.value):""),l={type:n,content:a};break;case"error":c="Error->"+a.message+(a.filename?"("+a.filename+")":""),l={type:n,content:{message:a.message,filename:a.filename}}}return{name:c,type:u,tags:i?l:null}}),{type:"monitor",typeName:"kibanaApmTrack",data:a,isError:"pageError"===e}}},"./src/services/middleware/kibanaApmTrack/index.ts":
/*!*********************************************************!*\
        !*** ./src/services/middleware/kibanaApmTrack/index.ts ***!
        \*********************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(
/*! ./defaultConfig */
"./src/services/middleware/kibanaApmTrack/defaultConfig.ts")),c=r(
/*! @util/index */
"@util/index"),u=r(
/*! ./handleMiddle */
"./src/services/middleware/kibanaApmTrack/handleMiddle.ts"),l=r(
/*! ./pageHashChange */
"./src/services/middleware/kibanaApmTrack/pageHashChange.ts"),d=r(
/*! ./api */
"./src/services/middleware/kibanaApmTrack/api.ts"),f=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;r.isSendlock=!0,r.isWaitSend=!1,r.isPageChangeHandle=!1,r.isCancelTrack=!0,r.trackInfo=void 0,r.pageInfo=null,r.errorContent="",r.trackList=[],r.resgisterPageHashChangeEventListener=l.resgisterPageHashChangeEventListener.bind(r),r.checkPageHashUrlChange=l.checkPageHashUrlChange.bind(r),r._handleHashPageChange=l._handleHashPageChange.bind(r),r._pageStart=l._pageStart.bind(r),r._pageHashNext=l._pageHashNext.bind(r),r._handleSendTrackMessage=u._handleSendTrackMessage.bind(r),r._handleCreateReport=u._handleCreateReport.bind(r),r._handleReciceReportMessage=u._handleReciceReportMessage.bind(r),r._handleTrackLog=u._handleTrackLog.bind(r),r._handleTrackNetwork=u._handleTrackNetwork.bind(r),r._handleTrackHtmlElementActive=u._handleTrackHtmlElementActive.bind(r),r._handleTrackError=u._handleTrackError.bind(r),r.cancelTrack=d.cancelTrack.bind(r),r.startTrack=d.startTrack.bind(r),r.cancelPatch=d.cancelPatch.bind(r);var n=t.develop,o=void 0!==n&&n;r._config=c.Tools.extend(i({},a.default),i({},t,{develop:o}));var s=r._config.reportDateFormat;return r.pageInfo={startUrl:"",startDate:c.Tools.dateFormat((new Date).getTime(),s),nextUrl:"",nextDate:0},r.sendMessage=function(){return c.consoleTools.warnError("sendMessage is not active, apply receive sendPipeMessage fail ")},r.resgisterPageHashChangeEventListener(),r}return n(t,e),t.prototype.apply=function(e){var t=this,r=e.sendMessage,n=e.useExtendMiddle,i=e.registerSendDoneCallback,s=this._config.automaticStart;return this.sendMessage=r,n(o(this._publicMiddleScopeNames,1)[0],this._handleReciceReportMessage),i(function(){t.isSendlock=!1,t.isWaitSend&&t._handleSendTrackMessage()}),s&&this.startTrack(),{cancelTrack:this.cancelTrack,startTrack:this.startTrack,cancelHashChangePatch:this.cancelPatch}},t}(c.KeepObserverPublic);t.default=f},"./src/services/middleware/kibanaApmTrack/pageHashChange.ts":
/*!******************************************************************!*\
        !*** ./src/services/middleware/kibanaApmTrack/pageHashChange.ts ***!
        \******************************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(
/*! @util/index */
"@util/index");t.resgisterPageHashChangeEventListener=function(){var e=this;window.addEventListener("hashchange",this._handleHashPageChange),e._pushState=window.history.pushState,window.history.pushState=function(t,r,n){var i=window.location.href,o=n||i;return e._handleHashPageChange({eventName:"pushState",oldURL:i,newURL:o,state:t,title:r}),e._pushState.apply(window.history,arguments)},e._replaceState=window.history.replaceState,window.history.replaceState=function(t,r,n){var i=window.location.href,o=n||i;return e._handleHashPageChange({eventName:"replaceState",oldURL:i,newURL:o,state:t,title:r}),e._replaceState.apply(window.history,arguments)},this._pageStart()},t.checkPageHashUrlChange=function(e,t){return!!(e&&t&&i.Tools.isString(e)&&i.Tools.isString(t))&&(t.indexOf("?")>-1?t.split("?")[0]:t)!==(e.indexOf("?")>-1?e.split("?")[0]:e)},t._handleHashPageChange=function(e){if(this.isPageChangeHandle)return!1;var t=e.newURL,r=e.oldURL;!this.isCancelTrack&&this.checkPageHashUrlChange(r,t)&&(this.isPageChangeHandle=!0,this._pageHashNext(t))},t._pageStart=function(){var e=this._config.reportDateFormat,t=window.location.href,r=i.Tools.dateFormat((new Date).getTime(),e);this.pageInfo=n({},this.pageInfo,{startUrl:t,startDate:r})},t._pageHashNext=function(e){var t=this._config.reportDateFormat,r=e||window.location.href,o=i.Tools.dateFormat((new Date).getTime(),t);this.pageInfo=n({},this.pageInfo,{nextUrl:r,nextDate:o}),this.isWaitSend||(this.isWaitSend="pageHashChange",this._handleSendTrackMessage())}},"@util/index":
/*!******************************!*\
        !*** external "@util/index" ***!
        \******************************/
/*! no static exports found */
function(t,r){t.exports=e}})})}).call(this,r(1)(e))},function(e,t,r){(function(e){var n,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,c){"object"===s(t)&&"object"===s(e)?e.exports=c(r(0)):(i=[r(0)],void 0===(o="function"==typeof(n=c)?n.apply(t,i):n)||(e.exports=o))}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/services/monitor/htmlElementActive/index.ts")}({"./src/services/monitor/htmlElementActive/api.ts":
/*!*******************************************************!*\
        !*** ./src/services/monitor/htmlElementActive/api.ts ***!
        \*******************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopObserver=function(){this.isObserver=!1,document.removeEventListener("click",this.handleElementEvent),document.removeEventListener("change",this.handleElementEvent)},t.startObserver=function(){this.isObserver||(this.isObserver=!0,document.addEventListener("click",this.handleElementEvent),document.addEventListener("change",this.handleElementEvent))}},"./src/services/monitor/htmlElementActive/defaultConfig.ts":
/*!*****************************************************************!*\
        !*** ./src/services/monitor/htmlElementActive/defaultConfig.ts ***!
        \*****************************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={xpathFlag:"KO_tracer_xPathFlag",elementTrackFlag:"KO-tracer-flag",isGlobalElementActionCatch:!1,automaticStart:!0}},"./src/services/monitor/htmlElementActive/handle.ts":
/*!**********************************************************!*\
        !*** ./src/services/monitor/htmlElementActive/handle.ts ***!
        \**********************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index"),i=/[\u4e00-\u9fa5\w]/gi,o=/[^\u4e00-\u9fa5\w]/gi;t.queryFlagElement=function(e){var t=this._config.elementTrackFlag;if(!n.Tools.isElement(e)||"body"===e.tagName.toLowerCase())return!1;var r=e.getAttribute(t);return n.Tools.isExist(r)?e:!!e.parentNode&&this.queryFlagElement(e.parentNode)},t.filterRepeat=function(e){if(!this.previouActiveElement)return this.previouActiveElement=e,!0;var t=e.type,r=e.xPath,n=this.previouActiveElement.type,i=this.previouActiveElement.xPath;return"click"===t&&t===n&&i===r?(this.previouActiveElement=e,!1):(this.previouActiveElement=e,!0)},t.createXPath=function(e){var t=this._config.xpathFlag;if(e.id)return'//*[@id="'+e.id+'"]';if("body"===e.nodeName.toLowerCase())return"/html/"+e.nodeName.toLowerCase();if(!e.parentNode)return"unkonw-parentNode";var r=1,n=e.parentNode.children;e.setAttribute(t,!0);for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s.getAttribute(t))return e.removeAttribute(t),this.createXPath(e.parentNode)+"/"+e.nodeName.toLowerCase()+(r>1?"["+r+"]":"");s.nodeName.toLowerCase()===e.nodeName.toLowerCase()&&r++}},t.createTitle=function(e){var t=e.tagName.toLowerCase(),r="";return e.outerText&&i.test(e.outerText)?r=(r=e.outerText).replace(o,""):e.textContent&&i.test(e.textContent)?r=e.textContent.replace(o,""):""!==e.className&&(r="."+e.className),t+":"+(r=r.length>30?r.substring(0,30)+"...":r)},t.createSendMessage=function(e,t){var r=this.createTitle(t),n=this.createXPath(t),i="change"===e?t.value:"";return"input"!==t.nodeName.toLowerCase()||"checkbox"!==t.type&&"radio"!==t.type||(i=t.checked),{type:e,title:r,xPath:n,value:i}},t.handleElementEvent=function(e){var t=e.target,r=e.type;if(!!this._config.isGlobalElementActionCatch||this.queryFlagElement(t)){var n=this.createSendMessage(r,t);this.filterRepeat(n)&&this.sendMessage({type:"monitor",typeName:"htmlElementActive",data:n})}}},"./src/services/monitor/htmlElementActive/index.ts":
/*!*********************************************************!*\
        !*** ./src/services/monitor/htmlElementActive/index.ts ***!
        \*********************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(
/*! ./defaultConfig */
"./src/services/monitor/htmlElementActive/defaultConfig.ts")),a=r(
/*! @util/index */
"@util/index"),c=r(
/*! ./api */
"./src/services/monitor/htmlElementActive/api.ts"),u=r(
/*! ./handle */
"./src/services/monitor/htmlElementActive/handle.ts"),l=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;r.queryFlagElement=u.queryFlagElement.bind(r),r.filterRepeat=u.filterRepeat.bind(r),r.createXPath=u.createXPath.bind(r),r.createTitle=u.createTitle.bind(r),r.createSendMessage=u.createSendMessage.bind(r),r.handleElementEvent=u.handleElementEvent.bind(r),r.stopObserver=c.stopObserver.bind(r),r.startObserver=c.startObserver.bind(r);var n=t,o=n.htmlElementCustom,l=void 0!==o&&o,d=n.develop,f=void 0!==d&&d,p=l||t;return r._config=a.Tools.extend(i({},s.default),i({},p,{develop:f})),r.isObserver=!1,r.sendMessage=function(){return a.consoleTools.warnError("sendMessage is not active, apply receive sendPipeMessage fail ")},r}return n(t,e),t.prototype.apply=function(e){var t=e.sendMessage,r=this._config.automaticStart;return this.sendMessage=t,r&&this.startObserver(),{htmlElementActiveStop:this.stopObserver,htmlElementActiveStart:this.startObserver}},t}(a.KeepObserverPublic);t.default=l},"@util/index":
/*!******************************!*\
        !*** external "@util/index" ***!
        \******************************/
/*! no static exports found */
function(t,r){t.exports=e}})})}).call(this,r(1)(e))},function(e,t,r){(function(e){var n,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,c){"object"===s(t)&&"object"===s(e)?e.exports=c(r(0)):(i=[r(0)],void 0===(o="function"==typeof(n=c)?n.apply(t,i):n)||(e.exports=o))}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/services/monitor/network/index.ts")}({"./src/services/monitor/network/api.ts":
/*!*********************************************!*\
        !*** ./src/services/monitor/network/api.ts ***!
        \*********************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopObserver=function(){this.isCatch=!1},t.startObserver=function(){this.isCatch=!0},t.cancelPatch=function(){window.XMLHttpRequest.prototype.open=this._open,window.XMLHttpRequest.prototype.send=this._send,window.XMLHttpRequest.prototype.setRequestHeader=this._setRequestHeader,window.fetch=this._fetch,this._open=null,this._send=null,this._setRequestHeader=null,this._fetch=null}},"./src/services/monitor/network/defaultConfig.ts":
/*!*******************************************************!*\
        !*** ./src/services/monitor/network/defaultConfig.ts ***!
        \*******************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={timeout:2e4,ignoreRequestList:[],isCatchResponseContent:!0,automaticStart:!0}},"./src/services/monitor/network/handle.ts":
/*!************************************************!*\
        !*** ./src/services/monitor/network/handle.ts ***!
        \************************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(
/*! @util/index */
"@util/index"),o=n(r(
/*! ./tool */
"./src/services/monitor/network/tool.ts"));t._init=function(){this._patchXMLAjax(),this._patchFetch()},t._patchXMLAjax=function(){var e=this,t=e._config.isCatchResponseContent;if(!window.XMLHttpRequest)return!1;e._open=window.XMLHttpRequest.prototype.open,e._send=window.XMLHttpRequest.prototype.send,e._setRequestHeader=window.XMLHttpRequest.prototype.setRequestHeader,window.XMLHttpRequest.prototype.open=function(r,n){var s=this,a=i.Tools.toArray(arguments),c=null,u=i.Tools.getUniqueID();r=a[0],n=a[1];s._url=n,s._method=r,s._id=u,s._setHead={},s._setHead[u]={};var l=s.onreadystatechange||function(){},d=function(){var n=!!e.networkList[u]&&e.networkList[u];if(!n){(n={}).method=r;var i=o.handleReqUrl(s._url),a=i.url,d=i.params;n.url=a,n.params=d}if(n.status=0,s.readyState>1&&(n.status=s.status),n.responseType=s.responseType,0==s.readyState)n.startTime||(n.startTime=+new Date);else if(1==s.readyState)n.startTime||(n.startTime=+new Date);else if(2==s.readyState);else if(3==s.readyState);else if(4==s.readyState){e._handleTimeout(u),n.responseHead={};for(var f=(s.getAllResponseHeaders()||"").split("\n"),p=0;p<f.length;p++){var h=f[p];if(h){var v=h.split(": "),m=v[0],g=v.slice(1).join(": ");n.responseHead[m]=g}}clearInterval(c),n.endTime=+new Date,n.costTime=n.endTime-(n.startTime||n.endTime),n.response=t?s.response:"no-catch-responseContent",setTimeout(function(){e.timeoutRequest[u]||e._handleDoneXML(u)})}else clearInterval(c);return e.timeoutRequest[u]||(e.networkList[u]=n),l.apply(s,arguments)};s.onreadystatechange=d;var f=-1;return c=setInterval(function(){f!=s.readyState&&(f=s.readyState,d.call(s))},10),e._open.apply(s,a)},window.XMLHttpRequest.prototype.setRequestHeader=function(t){var r=i.Tools.toArray(arguments);if(this._id&&this._setHead){var n=this._setHead[this._id],o=r[0]?r[0]:"unkownRequestHead",s=r[1]?r[1]:"";n[o]=s,this._setHead[this._id]=n}return e._setRequestHeader.apply(this,r)},window.XMLHttpRequest.prototype.send=function(){var t=this._id,r=this._method.toUpperCase(),n=this._setHead[t],s=this._url,a=[].slice.call(arguments),c=a[0],u="";e.networkList[t]||(e.networkList[t]={}),e.networkList[t].type="ajax",e.networkList[t].method=r;var l=o.handleReqUrl(s),d=(s=l.url,l.params);return e.networkList[t].url=s,e.networkList[t].params=d,n&&(e.networkList[t].requestHead=i.Tools.extend({},n),delete this._setHead[t]),"POST"===r&&i.Tools.isString(c)&&(u=c),e.networkList[t].body=u,e._handleSendXML(t),e._handleTimeout(t),e._send.apply(this,a)}},t._patchFetch=function(){if(!window.fetch)return!1;var e=this,t=e._config.isCatchResponseContent;e._fetch=window.fetch,window.fetch=function(r,n){void 0===n&&(n=void 0);var s=this,a=arguments,c=i.Tools.getUniqueID();e.networkList[c]||(e.networkList[c]={});var u=o.handleReqUrl(r.toString()),l=u.url,d=u.params;return e.networkList[c].type="fetch",e.networkList[c].url=l,e.networkList[c].status=0,e.networkList[c].params=d,n&&!i.Tools.isEmptyObject(n)?(e.networkList[c].method=n.method?n.method.toUpperCase():"GET",e.networkList[c].body=n.body?i.Tools.objectStringify(n.body):"",e.networkList[c].requestHead=n.headers?n.headers:void 0):(e.networkList[c].method="GET",e.networkList[c].body="",e.networkList[c].requestHead=void 0),e._handleSendXML(c),new Promise(function(r,n){var o,u=(new Date).getTime(),l=function(r,n){e.networkList[c].costTime=(new Date).getTime()-u,e.networkList[c].response=t?n:"no-catch-responseContent",e.networkList[c].status=r?r.status:0;var o=i.Tools.toArray(r.headers.keys());i.Tools.isEmptyArray(o)?e.networkList[c].responseHead=void 0:(e.networkList[c].responseHead={},o.forEach(function(t){e.networkList[c].responseHead[t]=r.headers.get(t)})),e.networkList[c].responseType=r.type,setTimeout(function(){e.timeoutRequest[c]||e._handleDoneXML(c)})};try{e.networkList[c].startTime=u,e._handleTimeout(c),o=e._fetch.apply(s,a)}catch(t){return e.networkList[c].costTime=(new Date).getTime()-u,e.networkList[c].response="fetch error:"+t,e.networkList[c].responseHead="",e.networkList[c].responseType="error",setTimeout(function(){e._handleDoneXML(c)}),void n(t)}o.then(function(t){r(t.clone()),e._handleTimeout(c),t.ok?t.text().then(function(e){l(t,e)},function(e){l(t,"fetch response.text() error:"+e)}):l(t,"fetch error:"+t.statusText)},function(t){e._handleTimeout(c),e.networkList[c].costTime=(new Date).getTime()-u,e.networkList[c].response="fetch error:"+t,e.networkList[c].responseHead="",e.networkList[c].responseType="error",setTimeout(function(){e.timeoutRequest[c]||e._handleDoneXML(c)}),n(t)})})}},t._handleTimeout=function(e){var t=this,r=t._config.timeout,n=!!t.timeoutRequest[e]&&t.timeoutRequest[e],i=!!t.timeout[e]&&t.timeout[e],o=t.networkList[e];if(!o||n)return!1;i?clearTimeout(i):i=setTimeout(function(){o.isTimeout=!0,o.timeout=r,o.isError=!0,o.errorContent="ajax request timeout，time:"+r+"(ms)",o.response=o.response||"ajax request timeout，time:"+r+"(ms)",t._handleDoneXML(e),t.timeoutRequest[e]=!0},r)},t._handleDoneXML=function(e){var t=i.Tools.extend({},this.networkList[e]);if(i.Tools.isEmptyObject(t))return!1;if(t.statusType="response",!this.isCatch||!this._handleJudgeDisbale(t))return delete this.networkList[e],!1;var r=t.status;o.validateStatus(r)||t.isError||(t.isError=!0,t.response=t.response||"ajax request error! error statusCode:"+(r||0),t.errorContent="ajax request error! error statusCode:"+(r||0)),this.sendMessage({type:"monitor",typeName:"network",data:t,isError:!(!t.isTimeout&&!t.isError)}),delete this.networkList[e]},t._handleSendXML=function(e){var t=i.Tools.extend({},this.networkList[e]);return!i.Tools.isEmptyObject(t)&&(t.statusType="request",this.isCatch&&this._handleJudgeDisbale(t)?void this.sendMessage({type:"monitor",typeName:"network",data:t}):(delete this.networkList[e],!1))},t._handleJudgeDisbale=function(e){var t=this._config.ignoreRequestList;if(t&&!i.Tools.isEmptyArray(t)){var r=e.url,n=!1;if(t.forEach(function(e){if(r.indexOf(e)>-1)return n=!0,!1}),n)return!1}return!0}},"./src/services/monitor/network/index.ts":
/*!***********************************************!*\
        !*** ./src/services/monitor/network/index.ts ***!
        \***********************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(
/*! ./defaultConfig */
"./src/services/monitor/network/defaultConfig.ts")),a=r(
/*! @util/index */
"@util/index"),c=r(
/*! ./api */
"./src/services/monitor/network/api.ts"),u=r(
/*! ./handle */
"./src/services/monitor/network/handle.ts"),l=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;r.stopObserver=c.stopObserver.bind(r),r.startObserver=c.startObserver.bind(r),r.cancelPatch=c.cancelPatch.bind(r),r._init=u._init.bind(r),r._patchXMLAjax=u._patchXMLAjax.bind(r),r._patchFetch=u._patchFetch.bind(r),r._handleTimeout=u._handleTimeout.bind(r),r._handleDoneXML=u._handleDoneXML.bind(r),r._handleSendXML=u._handleSendXML.bind(r),r._handleJudgeDisbale=u._handleJudgeDisbale.bind(r);var n=t,o=n.networkCustom,l=void 0!==o&&o,d=n.reportCustom,f=void 0!==d&&d,p=f&&f.reportUrl?f.reportUrl:[],h=a.Tools.extend({reportUrl:p},l||t);return r._config=a.Tools.extend(i({},s.default),h),r._config.ignoreRequestList=r._config.ignoreRequestList.concat(p),r._config.serverUrl&&r._config.ignoreRequestList.push(r._config.serverUrl),r.isCatch=!1,r.networkList={},r.timeout={},r.timeoutRequest={},r.sendMessage=function(){return a.consoleTools.warnError("sendMessage is not active, apply receive sendPipeMessage fail ")},r._init(),r}return n(t,e),t.prototype.apply=function(e){var t=e.sendMessage,r=this._config.automaticStart;return this.sendMessage=t,r&&this.startObserver(),{networkStop:this.stopObserver,networkStart:this.startObserver,networkCancelPatch:this.cancelPatch}},t}(a.KeepObserverPublic);t.default=l},"./src/services/monitor/network/tool.ts":
/*!**********************************************!*\
        !*** ./src/services/monitor/network/tool.ts ***!
        \**********************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleReqUrl=function(e){var t,r,i="",o="";if(-1===(e=window.decodeURIComponent(e)).indexOf("?"))o=e;else{var s=e.indexOf("?");o=e.substring(0,s),i={},s=(s=e.substring(s+1,e.length)).split("&");try{for(var a=n(s),c=a.next();!c.done;c=a.next()){var u=c.value;i[(u=u.split("="))[0]]=u[1]}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}return{url:o,params:i}},t.validateStatus=function(e){return e>=200&&e<300}},"@util/index":
/*!******************************!*\
        !*** external "@util/index" ***!
        \******************************/
/*! no static exports found */
function(t,r){t.exports=e}})})}).call(this,r(1)(e))},function(e,t,r){(function(e){var n,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,c){"object"===s(t)&&"object"===s(e)?e.exports=c(r(0)):(i=[r(0)],void 0===(o="function"==typeof(n=c)?n.apply(t,i):n)||(e.exports=o))}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/services/monitor/log/index.ts")}({"./src/services/monitor/log/api.ts":
/*!*****************************************!*\
        !*** ./src/services/monitor/log/api.ts ***!
        \*****************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index");t.stopObserver=function(){if(!this.console||this.console&&n.Tools.isEmptyObject(this.console))return this.console=null;window.console.log=this.console.log,window.console.error=this.console.error,window.console.info=this.console.info,window.console.debug=this.console.debug,window.console.warn=this.console.warn,window.console.time=this.console.time,window.console.timeEnd=this.console.timeEnd,window.console.clear=this.console.clear,this.console=null},t.startObserver=function(){var e=this;this.console||(this.console={},setTimeout(function(){n.Tools.isEmptyObject(e.console)&&e.console&&e._handleInit()}))}},"./src/services/monitor/log/defaultConfig.ts":
/*!***************************************************!*\
        !*** ./src/services/monitor/log/defaultConfig.ts ***!
        \***************************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isPrint:!0,automaticStart:!0}},"./src/services/monitor/log/handle.ts":
/*!********************************************!*\
        !*** ./src/services/monitor/log/handle.ts ***!
        \********************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(
/*! @util/index */
"@util/index");t._handleInit=function(){var e=this,t=this._config.isPrint,r=["log","info","warn","debug","error"];e.console={},window.console||(window.console={}),r.map(function(t){e.console[t]=window.console[t]}),e.console.time=window.console.time,e.console.timeEnd=window.console.timeEnd,e.console.clear=window.console.clear,r.map(function(r){window.console[r]=function(){for(var n,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];t&&e.console[r]&&o.Tools.isFunction(e.console[r])&&(n=e.console)[r].apply(n,i(s)),e._handleMessage(r,s)}});var n={};window.console.time=function(e){n[e]=Date.now()},window.console.timeEnd=function(r){var i=n[r];if(i){var s=r+":"+(Date.now()-i)+"ms";e._handleMessage("timeEnd",[s]),t&&e.console.log&&o.Tools.isFunction(e.console.log)&&e.console.log(s)}else{s=r+": 0ms";e._handleMessage("timeEnd",[s]),t&&e.console.log&&o.Tools.isFunction(e.console.log)&&e.console.log(s)}},window.console.clear=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._handleMessage("clear",t),e.console.clear.apply(window.console,t)}},t._handleMessage=function(e,t){var r={type:"",data:""},n="[";if(!o.Tools.isArray(t)||0===t.length)return!1;r.type=e,t.forEach(function(e,t){try{o.Tools.isObject(e)||o.Tools.isArray(e)?n+=(0===t?"":",")+o.Tools.objectStringify(e):n+=(0===t?"":",")+'"'+o.Tools.toString(e)+'"'}catch(e){n+=(0===t?"":",")+'"toString is err:'+o.Tools.toString(e).replace(/[\s\r\n\t]/g,"")+'"'}}),n+="]",r.data=n,this.sendMessage({type:"monitor",typeName:"log",data:r,isError:"error"===r.type})}},"./src/services/monitor/log/index.ts":
/*!*******************************************!*\
        !*** ./src/services/monitor/log/index.ts ***!
        \*******************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(
/*! ./defaultConfig */
"./src/services/monitor/log/defaultConfig.ts")),a=r(
/*! @util/index */
"@util/index"),c=r(
/*! ./api */
"./src/services/monitor/log/api.ts"),u=r(
/*! ./handle */
"./src/services/monitor/log/handle.ts"),l=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;r._handleInit=u._handleInit.bind(r),r._handleMessage=u._handleMessage.bind(r),r.stopObserver=c.stopObserver.bind(r),r.startObserver=c.startObserver.bind(r);var n=t,o=n.logCustom,l=void 0!==o&&o,d=n.develop,f=void 0!==d&&d,p=l||t;return r._config=a.Tools.extend(i({},s.default),i({},p,{develop:f})),r.console=null,r.sendMessage=function(){return a.consoleTools.warnError("sendMessage is not active, apply receive sendPipeMessage fail ")},r}return n(t,e),t.prototype.apply=function(e){var t=e.sendMessage,r=this._config.automaticStart;return this.sendMessage=t,r&&this.startObserver(),{logStop:this.stopObserver,logStart:this.startObserver}},t}(a.KeepObserverPublic);t.default=l},"@util/index":
/*!******************************!*\
        !*** external "@util/index" ***!
        \******************************/
/*! no static exports found */
function(t,r){t.exports=e}})})}).call(this,r(1)(e))},function(e,t,r){(function(e){var n,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,c){"object"===s(t)&&"object"===s(e)?e.exports=c(r(0)):(i=[r(0)],void 0===(o="function"==typeof(n=c)?n.apply(t,i):n)||(e.exports=o))}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/instance/index.ts")}({"./src/constants/index.ts":
/*!********************************!*\
        !*** ./src/constants/index.ts ***!
        \********************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportType=["unKownType","log","network","vue"],t.version="2.0.0-alpha.3",t.publicMiddleScopeNames=["sendMessage","error"]},"./src/instance/defaultConfig.ts":
/*!***************************************!*\
        !*** ./src/instance/defaultConfig.ts ***!
        \***************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index"),i=r(
/*! ../constants/index */
"./src/constants/index.ts");t.default={projectName:"",projectVersion:"",version:i.version,deviceID:n.getDeviceId(),isCheckRepeatUse:!0}},"./src/instance/index.ts":
/*!*******************************!*\
        !*** ./src/instance/index.ts ***!
        \*******************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(
/*! @util/index */
"@util/index"),a=o(r(
/*! ./defaultConfig */
"./src/instance/defaultConfig.ts")),c=o(r(
/*! ./pipe/index */
"./src/instance/pipe/index.ts"));t.keepObserverPipe=c.default;var u=o(r(
/*! ./pipe/PipeUser/index */
"./src/instance/pipe/PipeUser/index.ts"));t.PipeUser=u.default;var l=o(r(
/*! ./pipe/WatchDog/index */
"./src/instance/pipe/WatchDog/index.ts"));t.WatchDog=l.default;var d=o(r(
/*! ./pipe/MQ/index */
"./src/instance/pipe/MQ/index.ts"));t.MessageQueue=d.default;var f=r(
/*! ./method/api */
"./src/instance/method/api.ts"),p=r(
/*! ./method/middle */
"./src/instance/method/middle.ts"),h=r(
/*! ./method/base */
"./src/instance/method/base.ts"),v=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t=s.Tools.extend(i({},a.default),t))||this;r.registerApi=f.registerApi.bind(r),r.apis=f.apis.bind(r),r.useMiddle=p.useMiddle.bind(r),r.getRunMiddle=p.getRunMiddle.bind(r),r.extendReportParams=h.extendReportParams.bind(r),r.use=h.use.bind(r),r._config=t,r._pipe=new c.default(r,r._config);var n=r._config,o=n.projectName,u=n.projectVersion,l=n.version;return r.extendReportParams({projectName:o,projectVersion:u,version:l}),r.middleScopeNames=r.middleScopeNames.concat(r._publicMiddleScopeNames),r}return n(t,e),t}(s.KeepObserverPublic);t.default=v},"./src/instance/method/api.ts":
/*!************************************!*\
        !*** ./src/instance/method/api.ts ***!
        \************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(
/*! @util/index */
"@util/index");t.registerApi=function(e,t){this.apis[e]&&o.consoleTools.warnError("apiName:"+e+" is defined"),this.apis[e]=t},t.apis=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this.apis[e]){var n="apiName:"+e+" is undefined";return o.consoleTools.warnError(n),this.runMiddle("error",n)}var s=this.apis[e],a=null;try{a=s.apply(void 0,i(t))}catch(t){n="apiName:"+e+" is run find error:"+t;o.consoleTools.warnError(n),this.runMiddle("error",n)}return a}},"./src/instance/method/base.ts":
/*!*************************************!*\
        !*** ./src/instance/method/base.ts ***!
        \*************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index");t.extendReportParams=function(e){return n.KeepObserverPublic.extendReport(e)},t.use=function(e){return this._pipe.use(e)}},"./src/instance/method/middle.ts":
/*!***************************************!*\
        !*** ./src/instance/method/middle.ts ***!
        \***************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index");t.useMiddle=function(e,t){return-1===this.middleScopeNames.indexOf(e)&&this.middleScopeNames.push(e),n.KeepObserverMiddleWare.usePublishMiddles(e,t)},t.getRunMiddle=function(){return n.KeepObserverMiddleWare.currentRunMiddle}},"./src/instance/pipe/MQ/index.ts":
/*!***************************************!*\
        !*** ./src/instance/pipe/MQ/index.ts ***!
        \***************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! ./triggerQueue */
"./src/instance/pipe/MQ/triggerQueue.ts"),i=r(
/*! ./receiveQueue */
"./src/instance/pipe/MQ/receiveQueue.ts"),o=function(){return function(e,t){this.noticeListener=n.noticeListener.bind(this),this.sendPipeMessage=n.sendPipeMessage.bind(this),this.registerRecivePipeMessage=i.registerRecivePipeMessage.bind(this),this.isRun=!1,this.messageQueue=[],this.$pipe=t,this.consumerMap={}}}();t.default=o},"./src/instance/pipe/MQ/receiveQueue.ts":
/*!**********************************************!*\
        !*** ./src/instance/pipe/MQ/receiveQueue.ts ***!
        \**********************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index");t.registerRecivePipeMessage=function(e,t){var r=this;if(r.consumerMap[e]){var i="register recive pipe index is Occupy";return n.consoleTools.warnError(i),r.$pipe.$keepObserver.runMiddle("error",i),!1}return function(i){if(!i||!n.Tools.isFunction(i)){var o="registerRecivePipeMessage method receive function is not right";return n.consoleTools.warnError(o),void r.$pipe.$keepObserver.runMiddle("error",o)}r.consumerMap[e]=function(){var e=n.Tools.toArray(arguments);return i.apply(t,e)}}}},"./src/instance/pipe/MQ/triggerQueue.ts":
/*!**********************************************!*\
        !*** ./src/instance/pipe/MQ/triggerQueue.ts ***!
        \**********************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index");t.sendPipeMessage=function(e,t){var r=this,n={id:e,params:t};return new Promise(function(e,t){if(r.isRun)return t(!1);r.messageQueue.push(n),setTimeout(function(){var t=r.messageQueue.map(function(e){return e});r.messageQueue=[],r.noticeListener(t).then(e,e)})})},t.noticeListener=function(e){var t=this;return n.Tools.isArray(e)&&0!==e.length?(t.isRun=!0,Promise.all(e.map(function(e){var r=e.id,i=e.params;return Promise.all(n.Tools.mapToArray(t.consumerMap,function(e,o){if(o=!n.Tools.isNumber(o)&&parseInt(o),!n.Tools.isNumber(o))return!1;if(!n.Tools.isFunction(e))return!1;if(r===o)return!1;try{return e(i)||Promise.resolve()}catch(e){var s="handle message is runing error:"+e;n.consoleTools.warnError(s),t.$pipe.$keepObserver.runMiddle("error",s)}}))})).finally(function(){t.isRun=!1})):Promise.reject()}},"./src/instance/pipe/PipeUser/index.ts":
/*!*********************************************!*\
        !*** ./src/instance/pipe/PipeUser/index.ts ***!
        \*********************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(
/*! @util/index */
"@util/index"),u=r(
/*! @util/index */
"@util/index"),l=a(r(
/*! ../WatchDog/index */
"./src/instance/pipe/WatchDog/index.ts")),d=function(e){function t(t,r,n){var a=e.call(this)||this;a.pipeIndex=t;var c=new l.default;return a.sendMessage=c.sendMessageLimtWatch(function(e,n){if(r.$mq.isRun)return Promise.reject("mq handle process message ignore");var s=!0,c=o(r._publicMiddleScopeNames,1)[0],l=a.handleReportData(i({},e,{contendHashCode:n}));return r.$keepObserver.runMiddle(c,l).then(function(e){if(s=!1,!e)return a.constructor.emitSendDoneCallback(),!1;u.consoleTools.devLog(r._develop,e),r.$mq.sendPipeMessage(t,e).then(function(){a.constructor.emitSendDoneCallback()})}).finally(function(){s&&(u.consoleTools.devLog(r._develop,l),r.$mq.sendPipeMessage(t,l).then(function(){a.constructor.emitSendDoneCallback()}))})},function(e){return r.$keepObserver.runMiddle("error",e)}),a.runExtendMiddle=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=r.$keepObserver).runMiddle.apply(t,s([e],n))},a.useExtendMiddle=function(e,t){return r.$keepObserver.useMiddle(e,t)},a.extendsReportParams=function(e){return r.$keepObserver.extendReportParams(e)},a.registerReciveMessage=r.$mq.registerRecivePipeMessage(t,n),a.registerSendDoneCallback=function(e){a.constructor.onSendDoneCallbackMap.push(e)},a.middleScopeNames=r.$keepObserver.middleScopeNames.map(function(e){return e}),a}return n(t,e),t.onSendDoneCallbackMap=[],t.emitSendDoneCallback=function(){this.onSendDoneCallbackMap.forEach(function(e){try{e()}catch(e){u.consoleTools.warnError("emitSendDoneCallback find error:"+e)}})},t}(c.KeepObserverPublic);t.default=d},"./src/instance/pipe/WatchDog/index.ts":
/*!*********************************************!*\
        !*** ./src/instance/pipe/WatchDog/index.ts ***!
        \*********************************************/
/*! no static exports found */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(
/*! @util/index */
"@util/index"),i=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.sendMessageLimtWatch=function(e,t){var r=!1,i=1,o={},s=n.Tools.debounceWrap(1e3)(function(){o={},i=1}),a=n.Tools.throttleWrap(3e3)(function(){r=!1});return function(c){var u=c||{},l=u.isIgnoreSendRepeat,d=void 0!==l&&l,f=u.type,p=void 0===f?"undefined":f,h=u.typeName,v=void 0===h?"undefined":h,m=u.data,g=void 0===m?{}:m,y=n.Tools.getHashCode(g),_=d?"ignore":p+"_"+v+"_"+y,b=o[_]?++o[_]:o[_]=1;return(r=!!r||function(e,t,r){if(s(),++i>50){var o="send  Message during 1000ms in Over 50 times,maybe Anomaly";return n.consoleTools.warnError(o,t),r(o),!1}return 10===e?(o="send  Message during 1000ms in Over 10 times,maybe Anomaly",n.consoleTools.warnError(o,t),r(o),!1):e>20&&(o="send  Message during 1000ms in Over 20 times,maybe happend Endless loop",n.consoleTools.warnError(o,t),r(o),!0)}(b,c,t))?(a(),Promise.reject("send  Message during 1000ms in Over 20 times,maybe happend Endless loop").catch(function(e){return e})):e(c,y).catch(function(e){return e})}},e}();t.default=i},"./src/instance/pipe/index.ts":
/*!************************************!*\
        !*** ./src/instance/pipe/index.ts ***!
        \************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(
/*! @util/index */
"@util/index"),s=i(r(
/*! ./MQ/index */
"./src/instance/pipe/MQ/index.ts")),a=r(
/*! ./injection */
"./src/instance/pipe/injection.ts"),c=function(e){function t(t,r){var n=e.call(this,r)||this;return n.pipeMap={},n.injection=a.injection.bind(n),n.use=a.use.bind(n),n._config=r,n.$keepObserver=t,n.$mq=new s.default(r,n),n.pipeUser=[],n}return n(t,e),t}(o.KeepObserverPublic);t.default=c},"./src/instance/pipe/injection.ts":
/*!****************************************!*\
        !*** ./src/instance/pipe/injection.ts ***!
        \****************************************/
/*! no static exports found */
function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(
/*! @util/index */
"@util/index"),o=n(r(
/*! ./PipeUser/index */
"./src/instance/pipe/PipeUser/index.ts"));t.use=function(e){var t=this._config.isCheckRepeatUse;if(!e||!i.Tools.isFunction(e)&&!i.Tools.isClassObject(e)){var r="use method receive provider is not right";return i.consoleTools.warnError(r),this.$keepObserver.runMiddle("error",r)}var n=this._config,o=i.Tools.isFunction(e)?new e(n):e;if(t){var s=i.Tools.isObject(o)&&o.constructor?o.constructor.name:void 0,a=s+"-"+i.Tools.getHashCode(o);if(!s||this.pipeMap[a]){r=s?s+" already injection server":"Provider.constructor is undefined";return i.consoleTools.warnError(r),this.$keepObserver.runMiddle("error",r)}this.pipeMap[a]=!0}var c=o.apply,u=void 0===c?null:c;if(u&&i.Tools.isFunction(u))return this.injection(o,u),Promise.resolve(o);r="use method receive provider is not apply method";return i.consoleTools.warnError(r),this.$keepObserver.runMiddle("error",r)},t.injection=function(e,t){var r=this,n=this._config;if(!t||!i.Tools.isFunction(t)){var s="injection receive because Provider apply is undefined or no function";return i.consoleTools.warnError(s),r.$keepObserver.runMiddle("error",s)}var a=new o.default(r.pipeUser.length,r,e);try{var c=t.call(e,a,n);r.$keepObserver.registerApi&&i.Tools.isObject(c)&&!i.Tools.isEmptyObject(c)&&i.Tools.map(c,function(t,n){if(!n||!t){var o="apiName is '' or callback is undefined";return i.consoleTools.warnError(o),r.$keepObserver.runMiddle("error",o)}r.$keepObserver.registerApi(n,t.bind(e))}),r.pipeUser[r.pipeUser.length]=a}catch(e){s="injection receive Provider apply is runing find error:"+e;return i.consoleTools.warnError(s),r.$keepObserver.runMiddle("error",s)}}},"@util/index":
/*!******************************!*\
        !*** external "@util/index" ***!
        \******************************/
/*! no static exports found */
function(t,r){t.exports=e}})})}).call(this,r(1)(e))},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(7)),o=n(r(6));t.KeepObserverLog=o.default;var s=n(r(5));t.KeepObserverNetwork=s.default;var a=n(r(4));t.KeepObserverHtmlElementActive=a.default;var c=n(r(3));t.KeepObserverMiddlewareKibanaApmTrack=c.default;var u=n(r(2));t.KeepObserverKibanaApmReport=u.default,t.default=i.default},function(e,t,r){e.exports=r(8)}])});
//# sourceMappingURL=keepObserver.mini.js.map