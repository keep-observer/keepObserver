!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(window,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=14)}([function(e,r,t){"use strict";function n(e,r){if(!r||"string"!=typeof r)return console.error("format is undefiend or type is Error"),"";var t={"y+":(e=e instanceof Date?e:"number"==typeof e||"string"==typeof e?new Date(e):new Date).getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in t)if(new RegExp(n).test(r)){var o=RegExp.lastMatch;r=r.replace(o,t[n]<10?"0"+t[n]:t[n].toString())}return r}function o(e){return"[object Number]"==Object.prototype.toString.call(e)}function i(e){return"[object String]"==Object.prototype.toString.call(e)}function u(e){return"[object Array]"==Object.prototype.toString.call(e)}function c(e){return"[object Boolean]"==Object.prototype.toString.call(e)}function a(e){return void 0===e}function s(e){return null===e}function f(e){return!a(e)&&!s(e)}function l(e){return"[object Symbol]"==Object.prototype.toString.call(e)}function p(e){return b(e)&&(e instanceof SVGElement||e.ownerSVGElement)}function v(e){return!("[object Object]"!=Object.prototype.toString.call(e)&&(o(e)||i(e)||c(e)||u(e)||s(e)||y(e)||a(e)||l(e)))}function d(e){if(!v(e))return!0;for(var r in e)return!1;return!0}function g(e){return!u(e)||!(e.length>0)}function y(e){return"[object Function]"==Object.prototype.toString.call(e)}function b(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function h(e){var r=Object.prototype.toString.call(e);return"[object global]"==r||"[object Window]"==r||"[object DOMWindow]"==r}function O(e){var r,t=Object.prototype.hasOwnProperty;if(!e||"object"!=typeof e||e.nodeType||h(e))return!1;try{if(e.constructor&&!t.call(e,"constructor")&&!t.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(r in e);return void 0===r||t.call(e,r)}function _(e){return Array.prototype.slice.call(e)}function m(e){return e?"string"==typeof e?e:e.toString():""}function j(e,r){window.sessionStorage&&(e="keepObserverData_"+e,r=JSON.stringify(r),sessionStorage.setItem(e,r))}function w(e){if(window.sessionStorage){e="keepObserverData_"+e;var r=sessionStorage.getItem(e);return r?JSON.parse(r):""}}function k(e){window.sessionStorage&&(e="keepObserverData_"+e,sessionStorage.removeItem(e))}function x(e,r){window.localStorage&&(e="keepObserverData_"+e,r=JSON.stringify(r),localStorage.setItem(e,r))}function S(e){if(window.localStorage){e="keepObserverData_"+e;var r=localStorage.getItem(e);return r?JSON.parse(r):""}}function P(e){window.localStorage&&(e="keepObserverData_"+e,localStorage.removeItem(e))}function M(){return"xxxxxxxx-xxx-t-xxx--xxxxxxxx".replace(/[xyt]/g,function(e){var r=16*Math.random()|0,t=(new Date).getTime(),n="x"==e?r:"t"==e?t:3&r|8;return"t"==e?n:n.toString(16)})}function $(){var e=_(arguments);if(0===e.length)return console.error("extends params is undefined"),{};if(1===e.length)return e[0];var r=e[0],t=e.slice(1,e.length);return v(r)||u(r)||(r={}),t.map(function(e){if(r===e)return!1;if(v(e))for(var t in e)v(e[t])?(r[t]=r[t]&&v(r[t])?r[t]:{},r[t]=$(r[t],e[t])):u(e[t])?(r[t]=r[t]&&u(r[t])?r[t]:[],r[t]=$(r[t],e[t])):r[t]=e[t];else if(u(e))for(var n=0;n<e.length;n++)v(e[n])?(r[n]=r[n]&&v(r[n])?r[n]:{},r[n]=$(r[n],e[n])):u(e[n])?(r[n]=r[n]&&u(r[n])?r[n]:[],r[n]=$(r[n],e[n])):r[n]=e[n]}),r}t.r(r),t.d(r,"dateFormat",function(){return n}),t.d(r,"isNumber",function(){return o}),t.d(r,"isString",function(){return i}),t.d(r,"isArray",function(){return u}),t.d(r,"isBoolean",function(){return c}),t.d(r,"isUndefined",function(){return a}),t.d(r,"isNull",function(){return s}),t.d(r,"isExist",function(){return f}),t.d(r,"isSymbol",function(){return l}),t.d(r,"isSVGElement",function(){return p}),t.d(r,"isObject",function(){return v}),t.d(r,"isEmptyObject",function(){return d}),t.d(r,"isEmptyArray",function(){return g}),t.d(r,"isFunction",function(){return y}),t.d(r,"isElement",function(){return b}),t.d(r,"isWindow",function(){return h}),t.d(r,"isPlainObject",function(){return O}),t.d(r,"toArray",function(){return _}),t.d(r,"toString",function(){return m}),t.d(r,"setSessionStorage",function(){return j}),t.d(r,"getSessionStorage",function(){return w}),t.d(r,"removeSessionStorage",function(){return k}),t.d(r,"setStorage",function(){return x}),t.d(r,"getStorage",function(){return S}),t.d(r,"removeStorage",function(){return P}),t.d(r,"getUniqueID",function(){return M}),t.d(r,"extend",function(){return $})},function(e,r,t){"use strict";var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t(0)),i=function(){function e(e){this.$devLog=!1,this.$devError=!1,this._keeepObserverDetaultInit()}return e.prototype._keeepObserverDetaultInit=function(){var e=this;e.$devLog=window.console.log,window.console.log=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];e.$devLog.apply(window.console,r)},e.$devError=window.console.error,window.console.error=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];e.$devError.apply(window.console,r)},e.$devWarn=window.console.warn,window.console.warn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];e.$devWarn.apply(window.console,r)}},e.prototype.$mixin=function(e){for(var r in e&&o.isObject(e)&&!o.isEmptyObject(e)||this.$devError("keepObserver $mixin receive params not right"),e)this[r]?this.$devError("keepObserver $mixin method key: "+r+" is exist"):Object.defineProperty(this,r,{configurable:!1,enumerable:!0,value:e[r]})},e}();r.default=i},function(e,r,t){"use strict";var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t(0)),i=function(){if(!window.localStorage)return!1;var e=o.getStorage("deviceId");return e||(e=o.getUniqueID(),o.setStorage("deviceId",e)),e};r.default=function(){return i()}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){this._config.projectVersion&&this._config.updateVersionClearCache&&this.updateVersionClearCache()}},function(e,r,t){"use strict";var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t(0)),i=/^keepObserverData/i;r.updateVersionClearCache=function(){var e=o.getStorage("versionRecord");if(!this._config.projectVersion||this._config.projectVersion===e)return!1;if(!window.localStorage)return!1;for(var r in window.localStorage)i.test(r)&&(localStorage.removeItem(r),this.$devWarn("[keepObserver] updateVersionRecord key:"+r));o.setStorage("versionRecord",this._config.projectVersion)}},function(e,r,t){"use strict";var n=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),o=function(e){return e&&e.__esModule?e:{default:e}},i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var u=o(t(1)),c=i(t(0)),a=i(t(4)),s=function(e){function r(r,t){var n=e.call(this,arguments)||this;return n._config=t,n.$keepObserver=r,n.$mixin(a),n}return n(r,e),r.prototype.apply=function(){return{updateVersionClearCache:this.updateVersionClearCache}},r}(u.default);r.default=function(e,r){var t=new s(e,r),n=t.apply();for(var o in n)e[o]=function(){var e=c.toArray(arguments);return n[o].apply(t,e)}}},function(e,r,t){"use strict";var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t(0));r.preventStackError=function(e){var r=e.msg,t=e.pipeIndex;if(!r||!o.isExist(t)||!o.isExist(r.data))return!0;if(!this.pipeUser[t])return this._config.develop&&this.$devError("[keepObserver] send pipe Message Maybe happend Endless loop , will ignore in the message"),!0;try{var n=JSON.stringify(r.data)}catch(e){return this.$devError("[keepObserver] find error : "+e),!0}return this.stackCountBuff[n]?this.stackCountBuff[n]++:this.stackCountBuff[n]=1,this.resetStackCount(),this.judgeAnomaly(this.stackCountBuff[n],e)},r.judgeAnomaly=function(e,r){r.msg;var t=r.pipeIndex;return e>10&&e<20?(this.$devWarn("[keepObserver] send  pipe Message during 1000ms in Over 20 times. maybe Anomaly "),!1):e>20&&(this.pipeUser[t]=null,this.$devError("[keepObserver] send pipe Message during 1000ms in Over 20 times,maybe happend Endless loop"),!0)},r.resetStackCount=function(){var e=this;e.stackTimeFlag||(e.stackTimeFlag=!0,setTimeout(function(){e.stackCountBuff={},e.stackTimeFlag=!1},1e3))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=!1;r.isLock=function(){return this.receiveLock},r.openLock=function(){var e=this;if(e.receiveLock&&e._config.queueLock)return!1;e.receiveLock=!0,e._config.timeOutUnlock&&setTimeout(function(){e.closeLock()},e._config.receiveUnlockTime)},r.closeLock=function(){if(!this.receiveLock)return!1;n&&(window.cleanTimeout(n),n=!1),this.receiveLock=!1}},function(e,r,t){"use strict";var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t(0));r.sendPipeMessage=function(e,r,t){var n=this,u={pipeIndex:e,msg:r,options:t};return!n.isLock()&&!n.preventStackError(u)&&(n.messageQueue.push(u),!n.waiting&&void setTimeout(function(){var e=o.extend([],n.messageQueue);n.messageQueue=[],i.call(n,e)}))};var i=function(e){var r=this;if(!o.isArray(e)||0===e.length)return!1;r.waiting=!0;for(var t=0;t<e.length;t++){var n=e[t],i=n.pipeIndex,u=n.msg,c=n.options;r.pipeUser.map(function(e,t){if(!e||!e.receiveCallback||!o.isFunction(e.receiveCallback))return!1;if(i===t)return!1;var n=e.receiveCallback;try{r.openLock();var a=n(u,c);a&&o.isObject(a)&&(a instanceof Promise||a.then&&o.isFunction(a.then))?a.then(r.closeLock,r.closeLock):r.closeLock()}catch(e){r.closeLock(),r.$devError("[keepObserver] use pipe message notice is runing error:"+e)}})}r.waiting=!1}},function(e,r,t){"use strict";var n=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),u=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u},o=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(n(arguments[r]));return e},i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var u=i(t(0));r.registerRecivePipeMessage=function(e){var r=this;return r.pipeUser[e].receiveCallback?(r.$devError("[keepObsever] register recive pipe index is Occupy"),!1):function(t,n){if(!t||!u.isFunction(t))return r.$devError("[keepObsever] registerRecivePipeMessage method receive function is not right"),!1;r.pipeUser[e].receiveCallback=function(){var e=u.toArray(arguments);return n?t.apply(n,e):t.apply(void 0,o(e))}}}},function(e,r,t){"use strict";var n=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),u=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u},o=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(n(arguments[r]));return e},i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var u=i(t(0));r.use=function(e){if(!e||!u.isFunction(e))return this.$devError("[keepObserver] use method receive provider is not right"),!1;var r=new e(this._config,this._props),t=r.apply;if(!t||!u.isFunction(t))return this.$devError("[keepObserver] use method receive provider is not apply method"),!1;this.injection(r,t)},r.injection=function(e,r){var t=this;if(!r||!u.isFunction(r))return t.$devError("[keepObserver] injection receive ApplyFn is undefined or no function"),!1;var n=t.registerPipeListenerUser(),i={$devLog:function(){return t.$devLog.apply(t,o(arguments))},$devWarn:function(){return t.$devWarn.apply(t,o(arguments))},$devError:function(){return t.$devError.apply(t,o(arguments))}};try{var c=r.call(e,n,i);t.mixinKoInstance(e,c)}catch(e){t.$devError("[keepObserver] injection receive ApplyFn is runing find error:"+e)}},r.registerPipeListenerUser=function(){var e=this,r=e.pipeUser.length,t={pipeIndex:r,receiveCallback:null,sendPipeMessage:function(){return e.sendPipeMessage.apply(e,o([r],arguments))},registerRecivePipeMessage:null};return e.pipeUser[r]=t,t.registerRecivePipeMessage=e.registerRecivePipeMessage(r),{registerRecivePipeMessage:function(){return!!e.pipeUser[r]&&t.registerRecivePipeMessage.apply(t,o(arguments))},sendPipeMessage:function(){return!!e.pipeUser[r]&&t.sendPipeMessage.apply(t,o(arguments))}}},r.mixinKoInstance=function(e,r){var t=this;if(!r||u.isEmptyObject(r))return t.$devWarn("[keepObserver] injection ApplyFn return Object is undefined"),!1;var n=t.$keepObserver;for(var o in r){var i=r[o];i&&u.isFunction(i)||t.$devError("[keepObserver] injection ApplyFn return Object attr"+o+"is not right"),n[o]?t.$devError("[keepObserver] injection Discover namesake methods"):Object.defineProperty(n,o,{configurable:!1,enumerable:!0,value:function(r){return function(){var n=u.toArray(arguments);try{r.apply(e,n)}catch(e){t.$devError("[keepObserver] injection  methods "+o+" runing find error"+e)}}}(i)})}}},function(e,r,t){"use strict";var n=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),o=function(e){return e&&e.__esModule?e:{default:e}},i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(r,"__esModule",{value:!0});var u=o(t(1)),c=i(t(0)),a=i(t(10)),s=i(t(9)),f=i(t(8)),l=i(t(7)),p=i(t(6)),v=function(e){function r(r,t,n){var o=e.call(this,arguments)||this;return o._config=t,o._props=n,o.$keepObserver=r,o.waiting=!1,o.receiveLock=!1,o.stackCountBuff={},o.stackTimeFlag=!1,o.messageQueue=[],o.pipeUser=[],o.$mixin(a),o.$mixin(s),o.$mixin(f),o.$mixin(l),o.$mixin(p),o}return n(r,e),r.prototype.apply=function(){return{use:this.use}},r}(u.default);r.default=function(e,r,t){var n=new v(e,r,t),o=n.apply();for(var i in o)Object.defineProperty(e,i,{configurable:!1,enumerable:!0,value:function(e){return function(){var r=c.toArray(arguments);return o[e].apply(n,r)}}(i)})}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={queueLock:!0,timeOutUnlock:!0,forceUnlockTime:1e3,updateVersionClearCache:!1}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reportType=["unKownType","log","network","vue"],r.version="1.1.0"},function(e,r,t){"use strict";var n=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r},i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var u=o(t(0)),c=t(13),a=i(t(1)),s=i(t(12)),f=i(t(11)),l=i(t(5)),p=i(t(3)),v=i(t(2)),d=function(e){function r(r){var t=e.call(this,arguments)||this;return t._config=u.extend(s.default,r),t._props={version:c.version,deviceID:v.default()},t._version=c.version,f.default(t,t._config,t._props),l.default(t,t._config),p.default.call(t),t}return n(r,e),r}(a.default);e.exports=d,e.exports.default=e.exports}])});